var ia=Object.create;var Xr=Object.defineProperty;var oa=Object.getOwnPropertyDescriptor;var aa=Object.getOwnPropertyNames;var ca=Object.getPrototypeOf,ha=Object.prototype.hasOwnProperty;var w=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ua=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of aa(e))!ha.call(t,n)&&n!==r&&Xr(t,n,{get:()=>e[n],enumerable:!(s=oa(e,n))||s.enumerable});return t};var v=(t,e,r)=>(r=t!=null?ia(ca(t)):{},ua(e||!t||!t.__esModule?Xr(r,"default",{value:t,enumerable:!0}):r,t));var ts=w((cf,es)=>{"use strict";var F=class extends Error{constructor(e,r,s){super("[ParserError] "+e,r,s),this.name="ParserError",this.code="ParserError",Error.captureStackTrace&&Error.captureStackTrace(this,F)}},Fe=class{constructor(e){this.parser=e,this.buf="",this.returned=null,this.result=null,this.resultTable=null,this.resultArr=null}},fe=class{constructor(){this.pos=0,this.col=0,this.line=0,this.obj={},this.ctx=this.obj,this.stack=[],this._buf="",this.char=null,this.ii=0,this.state=new Fe(this.parseStart)}parse(e){if(e.length===0||e.length==null)return;this._buf=String(e),this.ii=-1,this.char=-1;let r;for(;r===!1||this.nextChar();)r=this.runOne();this._buf=null}nextChar(){return this.char===10&&(++this.line,this.col=-1),++this.ii,this.char=this._buf.codePointAt(this.ii),++this.pos,++this.col,this.haveBuffer()}haveBuffer(){return this.ii<this._buf.length}runOne(){return this.state.parser.call(this,this.state.returned)}finish(){this.char=1114112;let e;do e=this.state.parser,this.runOne();while(this.state.parser!==e);return this.ctx=null,this.state=null,this._buf=null,this.obj}next(e){if(typeof e!="function")throw new F("Tried to set state to non-existent state: "+JSON.stringify(e));this.state.parser=e}goto(e){return this.next(e),this.runOne()}call(e,r){r&&this.next(r),this.stack.push(this.state),this.state=new Fe(e)}callNow(e,r){return this.call(e,r),this.runOne()}return(e){if(this.stack.length===0)throw this.error(new F("Stack underflow"));e===void 0&&(e=this.state.buf),this.state=this.stack.pop(),this.state.returned=e}returnNow(e){return this.return(e),this.runOne()}consume(){if(this.char===1114112)throw this.error(new F("Unexpected end-of-buffer"));this.state.buf+=this._buf[this.ii]}error(e){return e.line=this.line,e.col=this.col,e.pos=this.pos,e}parseStart(){throw new F("Must declare a parseStart method")}};fe.END=1114112;fe.Error=F;es.exports=fe});var ss=w((hf,rs)=>{"use strict";rs.exports=t=>{let e=new Date(t);if(isNaN(e))throw new TypeError("Invalid Datetime");return e}});var $e=w((uf,ns)=>{"use strict";ns.exports=(t,e)=>{for(e=String(e);e.length<t;)e="0"+e;return e}});var os=w((lf,is)=>{"use strict";var ie=$e(),Pt=class extends Date{constructor(e){super(e+"Z"),this.isFloating=!0}toISOString(){let e=`${this.getUTCFullYear()}-${ie(2,this.getUTCMonth()+1)}-${ie(2,this.getUTCDate())}`,r=`${ie(2,this.getUTCHours())}:${ie(2,this.getUTCMinutes())}:${ie(2,this.getUTCSeconds())}.${ie(3,this.getUTCMilliseconds())}`;return`${e}T${r}`}};is.exports=t=>{let e=new Pt(t);if(isNaN(e))throw new TypeError("Invalid Datetime");return e}});var hs=w((ff,cs)=>{"use strict";var as=$e(),la=global.Date,Ht=class extends la{constructor(e){super(e),this.isDate=!0}toISOString(){return`${this.getUTCFullYear()}-${as(2,this.getUTCMonth()+1)}-${as(2,this.getUTCDate())}`}};cs.exports=t=>{let e=new Ht(t);if(isNaN(e))throw new TypeError("Invalid Datetime");return e}});var ls=w((df,us)=>{"use strict";var ze=$e(),It=class extends Date{constructor(e){super(`0000-01-01T${e}Z`),this.isTime=!0}toISOString(){return`${ze(2,this.getUTCHours())}:${ze(2,this.getUTCMinutes())}:${ze(2,this.getUTCSeconds())}.${ze(3,this.getUTCMilliseconds())}`}};us.exports=t=>{let e=new It(t);if(isNaN(e))throw new TypeError("Invalid Datetime");return e}});var De=w((exports,module)=>{"use strict";module.exports=makeParserClass(ts());module.exports.makeParserClass=makeParserClass;var TomlError=class extends Error{constructor(e){super(e),this.name="TomlError",Error.captureStackTrace&&Error.captureStackTrace(this,TomlError),this.fromTOML=!0,this.wrapped=null}};TomlError.wrap=t=>{let e=new TomlError(t.message);return e.code=t.code,e.wrapped=t,e};module.exports.TomlError=TomlError;var createDateTime=ss(),createDateTimeFloat=os(),createDate=hs(),createTime=ls(),CTRL_I=9,CTRL_J=10,CTRL_M=13,CTRL_CHAR_BOUNDARY=31,CHAR_SP=32,CHAR_QUOT=34,CHAR_NUM=35,CHAR_APOS=39,CHAR_PLUS=43,CHAR_COMMA=44,CHAR_HYPHEN=45,CHAR_PERIOD=46,CHAR_0=48,CHAR_1=49,CHAR_7=55,CHAR_9=57,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_A=65,CHAR_E=69,CHAR_F=70,CHAR_T=84,CHAR_U=85,CHAR_Z=90,CHAR_LOWBAR=95,CHAR_a=97,CHAR_b=98,CHAR_e=101,CHAR_f=102,CHAR_i=105,CHAR_l=108,CHAR_n=110,CHAR_o=111,CHAR_r=114,CHAR_s=115,CHAR_t=116,CHAR_u=117,CHAR_x=120,CHAR_z=122,CHAR_LCUB=123,CHAR_RCUB=125,CHAR_LSQB=91,CHAR_BSOL=92,CHAR_RSQB=93,CHAR_DEL=127,SURROGATE_FIRST=55296,SURROGATE_LAST=57343,escapes={[CHAR_b]:"\b",[CHAR_t]:"	",[CHAR_n]:`
`,[CHAR_f]:"\f",[CHAR_r]:"\r",[CHAR_QUOT]:'"',[CHAR_BSOL]:"\\"};function isDigit(t){return t>=CHAR_0&&t<=CHAR_9}function isHexit(t){return t>=CHAR_A&&t<=CHAR_F||t>=CHAR_a&&t<=CHAR_f||t>=CHAR_0&&t<=CHAR_9}function isBit(t){return t===CHAR_1||t===CHAR_0}function isOctit(t){return t>=CHAR_0&&t<=CHAR_7}function isAlphaNumQuoteHyphen(t){return t>=CHAR_A&&t<=CHAR_Z||t>=CHAR_a&&t<=CHAR_z||t>=CHAR_0&&t<=CHAR_9||t===CHAR_APOS||t===CHAR_QUOT||t===CHAR_LOWBAR||t===CHAR_HYPHEN}function isAlphaNumHyphen(t){return t>=CHAR_A&&t<=CHAR_Z||t>=CHAR_a&&t<=CHAR_z||t>=CHAR_0&&t<=CHAR_9||t===CHAR_LOWBAR||t===CHAR_HYPHEN}var _type=Symbol("type"),_declared=Symbol("declared"),hasOwnProperty=Object.prototype.hasOwnProperty,defineProperty=Object.defineProperty,descriptor={configurable:!0,enumerable:!0,writable:!0,value:void 0};function hasKey(t,e){return hasOwnProperty.call(t,e)?!0:(e==="__proto__"&&defineProperty(t,"__proto__",descriptor),!1)}var INLINE_TABLE=Symbol("inline-table");function InlineTable(){return Object.defineProperties({},{[_type]:{value:INLINE_TABLE}})}function isInlineTable(t){return t===null||typeof t!="object"?!1:t[_type]===INLINE_TABLE}var TABLE=Symbol("table");function Table(){return Object.defineProperties({},{[_type]:{value:TABLE},[_declared]:{value:!1,writable:!0}})}function isTable(t){return t===null||typeof t!="object"?!1:t[_type]===TABLE}var _contentType=Symbol("content-type"),INLINE_LIST=Symbol("inline-list");function InlineList(t){return Object.defineProperties([],{[_type]:{value:INLINE_LIST},[_contentType]:{value:t}})}function isInlineList(t){return t===null||typeof t!="object"?!1:t[_type]===INLINE_LIST}var LIST=Symbol("list");function List(){return Object.defineProperties([],{[_type]:{value:LIST}})}function isList(t){return t===null||typeof t!="object"?!1:t[_type]===LIST}var _custom;try{let utilInspect=eval("require('util').inspect");_custom=utilInspect.custom}catch(t){}var _inspect=_custom||"inspect",BoxedBigInt=class{constructor(e){try{this.value=global.BigInt.asIntN(64,e)}catch{this.value=null}Object.defineProperty(this,_type,{value:INTEGER})}isNaN(){return this.value===null}toString(){return String(this.value)}[_inspect](){return`[BigInt: ${this.toString()}]}`}valueOf(){return this.value}},INTEGER=Symbol("integer");function Integer(t){let e=Number(t);return Object.is(e,-0)&&(e=0),global.BigInt&&!Number.isSafeInteger(e)?new BoxedBigInt(t):Object.defineProperties(new Number(e),{isNaN:{value:function(){return isNaN(this)}},[_type]:{value:INTEGER},[_inspect]:{value:()=>`[Integer: ${t}]`}})}function isInteger(t){return t===null||typeof t!="object"?!1:t[_type]===INTEGER}var FLOAT=Symbol("float");function Float(t){return Object.defineProperties(new Number(t),{[_type]:{value:FLOAT},[_inspect]:{value:()=>`[Float: ${t}]`}})}function isFloat(t){return t===null||typeof t!="object"?!1:t[_type]===FLOAT}function tomlType(t){let e=typeof t;if(e==="object"){if(t===null)return"null";if(t instanceof Date)return"datetime";if(_type in t)switch(t[_type]){case INLINE_TABLE:return"inline-table";case INLINE_LIST:return"inline-list";case TABLE:return"table";case LIST:return"list";case FLOAT:return"float";case INTEGER:return"integer"}}return e}function makeParserClass(t){class e extends t{constructor(){super(),this.ctx=this.obj=Table()}atEndOfWord(){return this.char===CHAR_NUM||this.char===CTRL_I||this.char===CHAR_SP||this.atEndOfLine()}atEndOfLine(){return this.char===t.END||this.char===CTRL_J||this.char===CTRL_M}parseStart(){if(this.char===t.END)return null;if(this.char===CHAR_LSQB)return this.call(this.parseTableOrList);if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(isAlphaNumQuoteHyphen(this.char))return this.callNow(this.parseAssignStatement);throw this.error(new TomlError(`Unknown character "${this.char}"`))}parseWhitespaceToEOL(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(this.char===CHAR_NUM)return this.goto(this.parseComment);if(this.char===t.END||this.char===CTRL_J)return this.return();throw this.error(new TomlError("Unexpected character, expected only whitespace or comments till end of line"))}parseAssignStatement(){return this.callNow(this.parseAssign,this.recordAssignStatement)}recordAssignStatement(s){let n=this.ctx,i=s.key.pop();for(let o of s.key){if(hasKey(n,o)&&(!isTable(n[o])||n[o][_declared]))throw this.error(new TomlError("Can't redefine existing key"));n=n[o]=n[o]||Table()}if(hasKey(n,i))throw this.error(new TomlError("Can't redefine existing key"));return isInteger(s.value)||isFloat(s.value)?n[i]=s.value.valueOf():n[i]=s.value,this.goto(this.parseWhitespaceToEOL)}parseAssign(){return this.callNow(this.parseKeyword,this.recordAssignKeyword)}recordAssignKeyword(s){return this.state.resultTable?this.state.resultTable.push(s):this.state.resultTable=[s],this.goto(this.parseAssignKeywordPreDot)}parseAssignKeywordPreDot(){if(this.char===CHAR_PERIOD)return this.next(this.parseAssignKeywordPostDot);if(this.char!==CHAR_SP&&this.char!==CTRL_I)return this.goto(this.parseAssignEqual)}parseAssignKeywordPostDot(){if(this.char!==CHAR_SP&&this.char!==CTRL_I)return this.callNow(this.parseKeyword,this.recordAssignKeyword)}parseAssignEqual(){if(this.char===CHAR_EQUALS)return this.next(this.parseAssignPreValue);throw this.error(new TomlError('Invalid character, expected "="'))}parseAssignPreValue(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseValue,this.recordAssignValue)}recordAssignValue(s){return this.returnNow({key:this.state.resultTable,value:s})}parseComment(){do if(this.char===t.END||this.char===CTRL_J)return this.return();while(this.nextChar())}parseTableOrList(){if(this.char===CHAR_LSQB)this.next(this.parseList);else return this.goto(this.parseTable)}parseTable(){return this.ctx=this.obj,this.goto(this.parseTableNext)}parseTableNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseTableMore)}parseTableMore(s){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,s)&&(!isTable(this.ctx[s])||this.ctx[s][_declared]))throw this.error(new TomlError("Can't redefine existing key"));return this.ctx=this.ctx[s]=this.ctx[s]||Table(),this.ctx[_declared]=!0,this.next(this.parseWhitespaceToEOL)}else if(this.char===CHAR_PERIOD){if(!hasKey(this.ctx,s))this.ctx=this.ctx[s]=Table();else if(isTable(this.ctx[s]))this.ctx=this.ctx[s];else if(isList(this.ctx[s]))this.ctx=this.ctx[s][this.ctx[s].length-1];else throw this.error(new TomlError("Can't redefine existing key"));return this.next(this.parseTableNext)}else throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseList(){return this.ctx=this.obj,this.goto(this.parseListNext)}parseListNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseListMore)}parseListMore(s){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,s)||(this.ctx[s]=List()),isInlineList(this.ctx[s]))throw this.error(new TomlError("Can't extend an inline array"));if(isList(this.ctx[s])){let n=Table();this.ctx[s].push(n),this.ctx=n}else throw this.error(new TomlError("Can't redefine an existing key"));return this.next(this.parseListEnd)}else if(this.char===CHAR_PERIOD){if(!hasKey(this.ctx,s))this.ctx=this.ctx[s]=Table();else{if(isInlineList(this.ctx[s]))throw this.error(new TomlError("Can't extend an inline array"));if(isInlineTable(this.ctx[s]))throw this.error(new TomlError("Can't extend an inline table"));if(isList(this.ctx[s]))this.ctx=this.ctx[s][this.ctx[s].length-1];else if(isTable(this.ctx[s]))this.ctx=this.ctx[s];else throw this.error(new TomlError("Can't redefine an existing key"))}return this.next(this.parseListNext)}else throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseListEnd(s){if(this.char===CHAR_RSQB)return this.next(this.parseWhitespaceToEOL);throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseValue(){if(this.char===t.END)throw this.error(new TomlError("Key without value"));if(this.char===CHAR_QUOT)return this.next(this.parseDoubleString);if(this.char===CHAR_APOS)return this.next(this.parseSingleString);if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)return this.goto(this.parseNumberSign);if(this.char===CHAR_i)return this.next(this.parseInf);if(this.char===CHAR_n)return this.next(this.parseNan);if(isDigit(this.char))return this.goto(this.parseNumberOrDateTime);if(this.char===CHAR_t||this.char===CHAR_f)return this.goto(this.parseBoolean);if(this.char===CHAR_LSQB)return this.call(this.parseInlineList,this.recordValue);if(this.char===CHAR_LCUB)return this.call(this.parseInlineTable,this.recordValue);throw this.error(new TomlError("Unexpected character, expecting string, number, datetime, boolean, inline array or inline table"))}recordValue(s){return this.returnNow(s)}parseInf(){if(this.char===CHAR_n)return this.next(this.parseInf2);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseInf2(){if(this.char===CHAR_f)return this.state.buf==="-"?this.return(-1/0):this.return(1/0);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseNan(){if(this.char===CHAR_a)return this.next(this.parseNan2);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseNan2(){if(this.char===CHAR_n)return this.return(NaN);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseKeyword(){return this.char===CHAR_QUOT?this.next(this.parseBasicString):this.char===CHAR_APOS?this.next(this.parseLiteralString):this.goto(this.parseBareKey)}parseBareKey(){do{if(this.char===t.END)throw this.error(new TomlError("Key ended without value"));if(isAlphaNumHyphen(this.char))this.consume();else{if(this.state.buf.length===0)throw this.error(new TomlError("Empty bare keys are not allowed"));return this.returnNow()}}while(this.nextChar())}parseSingleString(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiStringMaybe):this.goto(this.parseLiteralString)}parseLiteralString(){do{if(this.char===CHAR_APOS)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}parseLiteralMultiStringMaybe(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiString):this.returnNow()}parseLiteralMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseLiteralMultiStringContent):this.goto(this.parseLiteralMultiStringContent)}parseLiteralMultiStringContent(){do{if(this.char===CHAR_APOS)return this.next(this.parseLiteralMultiEnd);if(this.char===t.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}parseLiteralMultiEnd(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiEnd2):(this.state.buf+="'",this.goto(this.parseLiteralMultiStringContent))}parseLiteralMultiEnd2(){return this.char===CHAR_APOS?this.return():(this.state.buf+="''",this.goto(this.parseLiteralMultiStringContent))}parseDoubleString(){return this.char===CHAR_QUOT?this.next(this.parseMultiStringMaybe):this.goto(this.parseBasicString)}parseBasicString(){do{if(this.char===CHAR_BSOL)return this.call(this.parseEscape,this.recordEscapeReplacement);if(this.char===CHAR_QUOT)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}recordEscapeReplacement(s){return this.state.buf+=s,this.goto(this.parseBasicString)}parseMultiStringMaybe(){return this.char===CHAR_QUOT?this.next(this.parseMultiString):this.returnNow()}parseMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseMultiStringContent):this.goto(this.parseMultiStringContent)}parseMultiStringContent(){do{if(this.char===CHAR_BSOL)return this.call(this.parseMultiEscape,this.recordMultiEscapeReplacement);if(this.char===CHAR_QUOT)return this.next(this.parseMultiEnd);if(this.char===t.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}errorControlCharInString(){let s="\\u00";return this.char<16&&(s+="0"),s+=this.char.toString(16),this.error(new TomlError(`Control characters (codes < 0x1f and 0x7f) are not allowed in strings, use ${s} instead`))}recordMultiEscapeReplacement(s){return this.state.buf+=s,this.goto(this.parseMultiStringContent)}parseMultiEnd(){return this.char===CHAR_QUOT?this.next(this.parseMultiEnd2):(this.state.buf+='"',this.goto(this.parseMultiStringContent))}parseMultiEnd2(){return this.char===CHAR_QUOT?this.return():(this.state.buf+='""',this.goto(this.parseMultiStringContent))}parseMultiEscape(){return this.char===CTRL_M||this.char===CTRL_J?this.next(this.parseMultiTrim):this.char===CHAR_SP||this.char===CTRL_I?this.next(this.parsePreMultiTrim):this.goto(this.parseEscape)}parsePreMultiTrim(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CTRL_M||this.char===CTRL_J)return this.next(this.parseMultiTrim);throw this.error(new TomlError("Can't escape whitespace"))}parseMultiTrim(){return this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M?null:this.returnNow()}parseEscape(){if(this.char in escapes)return this.return(escapes[this.char]);if(this.char===CHAR_u)return this.call(this.parseSmallUnicode,this.parseUnicodeReturn);if(this.char===CHAR_U)return this.call(this.parseLargeUnicode,this.parseUnicodeReturn);throw this.error(new TomlError("Unknown escape character: "+this.char))}parseUnicodeReturn(s){try{let n=parseInt(s,16);if(n>=SURROGATE_FIRST&&n<=SURROGATE_LAST)throw this.error(new TomlError("Invalid unicode, character in range 0xD800 - 0xDFFF is reserved"));return this.returnNow(String.fromCodePoint(n))}catch(n){throw this.error(TomlError.wrap(n))}}parseSmallUnicode(){if(isHexit(this.char)){if(this.consume(),this.state.buf.length>=4)return this.return()}else throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"))}parseLargeUnicode(){if(isHexit(this.char)){if(this.consume(),this.state.buf.length>=8)return this.return()}else throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"))}parseNumberSign(){return this.consume(),this.next(this.parseMaybeSignedInfOrNan)}parseMaybeSignedInfOrNan(){return this.char===CHAR_i?this.next(this.parseInf):this.char===CHAR_n?this.next(this.parseNan):this.callNow(this.parseNoUnder,this.parseNumberIntegerStart)}parseNumberIntegerStart(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberIntegerExponentOrDecimal)):this.goto(this.parseNumberInteger)}parseNumberIntegerExponentOrDecimal(){return this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Integer(this.state.buf))}parseNumberInteger(){if(isDigit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder);if(this.char===CHAR_E||this.char===CHAR_e)return this.consume(),this.next(this.parseNumberExponentSign);if(this.char===CHAR_PERIOD)return this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat);{let s=Integer(this.state.buf);if(s.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(s)}}}parseNoUnder(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD||this.char===CHAR_E||this.char===CHAR_e)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNoUnderHexOctBinLiteral(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNumberFloat(){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder,this.parseNumberFloat);if(isDigit(this.char))this.consume();else return this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Float(this.state.buf))}parseNumberExponentSign(){if(isDigit(this.char))return this.goto(this.parseNumberExponent);if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.call(this.parseNoUnder,this.parseNumberExponent);else throw this.error(new TomlError("Unexpected character, expected -, + or digit"))}parseNumberExponent(){if(isDigit(this.char))this.consume();else return this.char===CHAR_LOWBAR?this.call(this.parseNoUnder):this.returnNow(Float(this.state.buf))}parseNumberOrDateTime(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberBaseOrDateTime)):this.goto(this.parseNumberOrDateTimeOnly)}parseNumberOrDateTimeOnly(){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder,this.parseNumberInteger);if(isDigit(this.char))this.consume(),this.state.buf.length>4&&this.next(this.parseNumberInteger);else return this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_HYPHEN?this.goto(this.parseDateTime):this.char===CHAR_COLON?this.goto(this.parseOnlyTimeHour):this.returnNow(Integer(this.state.buf))}parseDateTimeOnly(){if(this.state.buf.length<4){if(isDigit(this.char))return this.consume();if(this.char===CHAR_COLON)return this.goto(this.parseOnlyTimeHour);throw this.error(new TomlError("Expected digit while parsing year part of a date"))}else{if(this.char===CHAR_HYPHEN)return this.goto(this.parseDateTime);throw this.error(new TomlError("Expected hyphen (-) while parsing year part of date"))}}parseNumberBaseOrDateTime(){return this.char===CHAR_b?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerBin)):this.char===CHAR_o?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerOct)):this.char===CHAR_x?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerHex)):this.char===CHAR_PERIOD?this.goto(this.parseNumberInteger):isDigit(this.char)?this.goto(this.parseDateTimeOnly):this.returnNow(Integer(this.state.buf))}parseIntegerHex(){if(isHexit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{let s=Integer(this.state.buf);if(s.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(s)}}}parseIntegerOct(){if(isOctit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{let s=Integer(this.state.buf);if(s.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(s)}}}parseIntegerBin(){if(isBit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{let s=Integer(this.state.buf);if(s.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(s)}}}parseDateTime(){if(this.state.buf.length<4)throw this.error(new TomlError("Years less than 1000 must be zero padded to four characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseDateMonth)}parseDateMonth(){if(this.char===CHAR_HYPHEN){if(this.state.buf.length<2)throw this.error(new TomlError("Months less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseDateDay)}else if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}parseDateDay(){if(this.char===CHAR_T||this.char===CHAR_SP){if(this.state.buf.length<2)throw this.error(new TomlError("Days less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseStartTimeHour)}else{if(this.atEndOfWord())return this.returnNow(createDate(this.state.result+"-"+this.state.buf));if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}}parseStartTimeHour(){return this.atEndOfWord()?this.returnNow(createDate(this.state.result)):this.goto(this.parseTimeHour)}parseTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result+="T"+this.state.buf,this.state.buf="",this.next(this.parseTimeMin)}else if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}parseTimeMin(){if(this.state.buf.length<2&&isDigit(this.char))this.consume();else{if(this.state.buf.length===2&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeSec);throw this.error(new TomlError("Incomplete datetime"))}}parseTimeSec(){if(isDigit(this.char)){if(this.consume(),this.state.buf.length===2)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeZoneOrFraction)}else throw this.error(new TomlError("Incomplete datetime"))}parseOnlyTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeMin)}else throw this.error(new TomlError("Incomplete time"))}parseOnlyTimeMin(){if(this.state.buf.length<2&&isDigit(this.char))this.consume();else{if(this.state.buf.length===2&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeSec);throw this.error(new TomlError("Incomplete time"))}}parseOnlyTimeSec(){if(isDigit(this.char)){if(this.consume(),this.state.buf.length===2)return this.next(this.parseOnlyTimeFractionMaybe)}else throw this.error(new TomlError("Incomplete time"))}parseOnlyTimeFractionMaybe(){if(this.state.result+=":"+this.state.buf,this.char===CHAR_PERIOD)this.state.buf="",this.next(this.parseOnlyTimeFraction);else return this.return(createTime(this.state.result))}parseOnlyTimeFraction(){if(isDigit(this.char))this.consume();else if(this.atEndOfWord()){if(this.state.buf.length===0)throw this.error(new TomlError("Expected digit in milliseconds"));return this.returnNow(createTime(this.state.result+"."+this.state.buf))}else throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}parseTimeZoneOrFraction(){if(this.char===CHAR_PERIOD)this.consume(),this.next(this.parseDateTimeFraction);else if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.next(this.parseTimeZoneHour);else{if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}}parseDateTimeFraction(){if(isDigit(this.char))this.consume();else{if(this.state.buf.length===1)throw this.error(new TomlError("Expected digit in milliseconds"));if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.next(this.parseTimeZoneHour);else{if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}}}parseTimeZoneHour(){if(isDigit(this.char)){if(this.consume(),/\d\d$/.test(this.state.buf))return this.next(this.parseTimeZoneSep)}else throw this.error(new TomlError("Unexpected character in datetime, expected digit"))}parseTimeZoneSep(){if(this.char===CHAR_COLON)this.consume(),this.next(this.parseTimeZoneMin);else throw this.error(new TomlError("Unexpected character in datetime, expected colon"))}parseTimeZoneMin(){if(isDigit(this.char)){if(this.consume(),/\d\d$/.test(this.state.buf))return this.return(createDateTime(this.state.result+this.state.buf))}else throw this.error(new TomlError("Unexpected character in datetime, expected digit"))}parseBoolean(){if(this.char===CHAR_t)return this.consume(),this.next(this.parseTrue_r);if(this.char===CHAR_f)return this.consume(),this.next(this.parseFalse_a)}parseTrue_r(){if(this.char===CHAR_r)return this.consume(),this.next(this.parseTrue_u);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_u(){if(this.char===CHAR_u)return this.consume(),this.next(this.parseTrue_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_e(){if(this.char===CHAR_e)return this.return(!0);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_a(){if(this.char===CHAR_a)return this.consume(),this.next(this.parseFalse_l);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_l(){if(this.char===CHAR_l)return this.consume(),this.next(this.parseFalse_s);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_s(){if(this.char===CHAR_s)return this.consume(),this.next(this.parseFalse_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_e(){if(this.char===CHAR_e)return this.return(!1);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseInlineList(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===t.END)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_NUM?this.call(this.parseComment):this.char===CHAR_RSQB?this.return(this.state.resultArr||InlineList()):this.callNow(this.parseValue,this.recordInlineListValue)}recordInlineListValue(s){if(this.state.resultArr){let n=this.state.resultArr[_contentType],i=tomlType(s);if(n!==i)throw this.error(new TomlError(`Inline lists must be a single type, not a mix of ${n} and ${i}`))}else this.state.resultArr=InlineList(tomlType(s));return isFloat(s)||isInteger(s)?this.state.resultArr.push(s.valueOf()):this.state.resultArr.push(s),this.goto(this.parseInlineListNext)}parseInlineListNext(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CHAR_COMMA)return this.next(this.parseInlineList);if(this.char===CHAR_RSQB)return this.goto(this.parseInlineList);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}parseInlineTable(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===t.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_RCUB?this.return(this.state.resultTable||InlineTable()):(this.state.resultTable||(this.state.resultTable=InlineTable()),this.callNow(this.parseAssign,this.recordInlineTableValue))}recordInlineTableValue(s){let n=this.state.resultTable,i=s.key.pop();for(let o of s.key){if(hasKey(n,o)&&(!isTable(n[o])||n[o][_declared]))throw this.error(new TomlError("Can't redefine existing key"));n=n[o]=n[o]||Table()}if(hasKey(n,i))throw this.error(new TomlError("Can't redefine existing key"));return isInteger(s.value)||isFloat(s.value)?n[i]=s.value.valueOf():n[i]=s.value,this.goto(this.parseInlineTableNext)}parseInlineTableNext(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===t.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));if(this.char===CHAR_COMMA)return this.next(this.parseInlineTable);if(this.char===CHAR_RCUB)return this.goto(this.parseInlineTable);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}}return e}});var Ve=w((pf,fs)=>{"use strict";fs.exports=fa;function fa(t,e){if(t.pos==null||t.line==null)return t;let r=t.message;if(r+=` at row ${t.line+1}, col ${t.col+1}, pos ${t.pos}:
`,e&&e.split){let s=e.split(/\n/),n=String(Math.min(s.length,t.line+3)).length,i=" ";for(;i.length<n;)i+=" ";for(let o=Math.max(0,t.line-1);o<Math.min(s.length,t.line+2);++o){let a=String(o+1);if(a.length<n&&(a=" "+a),t.line===o){r+=a+"> "+s[o]+`
`,r+=i+"  ";for(let c=0;c<t.col;++c)r+=" ";r+=`^
`}else r+=a+": "+s[o]+`
`}}return t.message=r+`
`,t}});var ps=w((mf,ds)=>{"use strict";ds.exports=ma;var da=De(),pa=Ve();function ma(t){global.Buffer&&global.Buffer.isBuffer(t)&&(t=t.toString("utf8"));let e=new da;try{return e.parse(t),e.finish()}catch(r){throw pa(r,t)}}});var ys=w((gf,gs)=>{"use strict";gs.exports=ya;var ga=De(),ms=Ve();function ya(t,e){e||(e={});let r=0,s=e.blocksize||40960,n=new ga;return new Promise((o,a)=>{setImmediate(i,r,s,o,a)});function i(o,a,c,u){if(o>=t.length)try{return c(n.finish())}catch(d){return u(ms(d,t))}try{n.parse(t.slice(o,o+a)),setImmediate(i,o+a,a,c,u)}catch(d){u(ms(d,t))}}}});var ws=w((yf,_s)=>{"use strict";_s.exports=_a;var ba=require("stream"),bs=De();function _a(t){return t?wa(t):Ea(t)}function wa(t){let e=new bs;return t.setEncoding("utf8"),new Promise((r,s)=>{let n,i=!1,o=!1;function a(){if(i=!0,!n)try{r(e.finish())}catch(d){s(d)}}function c(d){o=!0,s(d)}t.once("end",a),t.once("error",c),u();function u(){n=!0;let d;for(;(d=t.read())!==null;)try{e.parse(d)}catch(g){return c(g)}if(n=!1,i)return a();o||t.once("readable",u)}})}function Ea(){let t=new bs;return new ba.Transform({objectMode:!0,transform(e,r,s){try{t.parse(e.toString(r))}catch(n){this.emit("error",n)}s()},flush(e){try{this.push(t.finish())}catch(r){this.emit("error",r)}e()}})}});var Es=w((bf,de)=>{"use strict";de.exports=ps();de.exports.async=ys();de.exports.stream=ws();de.exports.prettyError=Ve()});var Ns=w((_f,qt)=>{"use strict";qt.exports=xa;qt.exports.value=kt;function xa(t){if(t===null)throw Y("null");if(t===void 0)throw Y("undefined");if(typeof t!="object")throw Y(typeof t);if(typeof t.toJSON=="function"&&(t=t.toJSON()),t==null)return null;let e=U(t);if(e!=="table")throw Y(e);return Lt("","",t)}function Y(t){return new Error("Can only stringify objects, not "+t)}function Ta(){return new Error("Array values can't have mixed types")}function xs(t){return Object.keys(t).filter(e=>Ts(t[e]))}function Ca(t){return Object.keys(t).filter(e=>!Ts(t[e]))}function We(t){let e=Array.isArray(t)?[]:Object.prototype.hasOwnProperty.call(t,"__proto__")?{["__proto__"]:void 0}:{};for(let r of Object.keys(t))t[r]&&typeof t[r].toJSON=="function"&&!("toISOString"in t[r])?e[r]=t[r].toJSON():e[r]=t[r];return e}function Lt(t,e,r){r=We(r);var s,n;s=xs(r),n=Ca(r);var i=[],o=e||"";s.forEach(c=>{var u=U(r[c]);u!=="undefined"&&u!=="null"&&i.push(o+Ge(c)+" = "+As(r[c],!0))}),i.length>0&&i.push("");var a=t&&s.length>0?e+"  ":"";return n.forEach(c=>{i.push(qa(t,a,c,r[c]))}),i.join(`
`)}function Ts(t){switch(U(t)){case"undefined":case"null":case"integer":case"nan":case"float":case"boolean":case"string":case"datetime":return!0;case"array":return t.length===0||U(t[0])!=="table";case"table":return Object.keys(t).length===0;default:return!1}}function U(t){return t===void 0?"undefined":t===null?"null":typeof t=="bigint"||Number.isInteger(t)&&!Object.is(t,-0)?"integer":typeof t=="number"?"float":typeof t=="boolean"?"boolean":typeof t=="string"?"string":"toISOString"in t?isNaN(t)?"undefined":"datetime":Array.isArray(t)?"array":"table"}function Ge(t){var e=String(t);return/^[-A-Za-z0-9_]+$/.test(e)?e:Cs(e)}function Cs(t){return'"'+Rs(t).replace(/"/g,'\\"')+'"'}function Ra(t){return"'"+t+"'"}function Aa(t,e){for(;e.length<t;)e="0"+e;return e}function Rs(t){return t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/([\u0000-\u001f\u007f])/,e=>"\\u"+Aa(4,e.codePointAt(0).toString(16)))}function Sa(t){let e=t.split(/\n/).map(r=>Rs(r).replace(/"(?="")/g,'\\"')).join(`
`);return e.slice(-1)==='"'&&(e+=`\\
`),`"""
`+e+'"""'}function As(t,e){let r=U(t);return r==="string"&&(e&&/\n/.test(t)?r="string-multiline":!/[\b\t\n\f\r']/.test(t)&&/"/.test(t)&&(r="string-literal")),kt(t,r)}function kt(t,e){switch(e||(e=U(t)),e){case"string-multiline":return Sa(t);case"string":return Cs(t);case"string-literal":return Ra(t);case"integer":return Ss(t);case"float":return Oa(t);case"boolean":return Na(t);case"datetime":return Pa(t);case"array":return La(t.filter(r=>U(r)!=="null"&&U(r)!=="undefined"&&U(r)!=="nan"));case"table":return ka(t);default:throw Y(e)}}function Ss(t){return String(t).replace(/\B(?=(\d{3})+(?!\d))/g,"_")}function Oa(t){if(t===1/0)return"inf";if(t===-1/0)return"-inf";if(Object.is(t,NaN))return"nan";if(Object.is(t,-0))return"-0.0";var e=String(t).split("."),r=e[0],s=e[1]||0;return Ss(r)+"."+s}function Na(t){return String(t)}function Pa(t){return t.toISOString()}function Ha(t){return t==="float"||t==="integer"}function Ia(t){var e=U(t[0]);return t.every(r=>U(r)===e)?e:t.every(r=>Ha(U(r)))?"float":"mixed"}function Os(t){let e=Ia(t);if(e==="mixed")throw Ta();return e}function La(t){t=We(t);let e=Os(t);var r="[",s=t.map(n=>kt(n,e));return s.join(", ").length>60||/\n/.test(s)?r+=`
  `+s.join(`,
  `)+`
`:r+=" "+s.join(", ")+(s.length>0?" ":""),r+"]"}function ka(t){t=We(t);var e=[];return Object.keys(t).forEach(r=>{e.push(Ge(r)+" = "+As(t[r],!1))}),"{ "+e.join(", ")+(e.length>0?" ":"")+"}"}function qa(t,e,r,s){var n=U(s);if(n==="array")return va(t,e,r,s);if(n==="table")return Ua(t,e,r,s);throw Y(n)}function va(t,e,r,s){s=We(s),Os(s);var n=U(s[0]);if(n!=="table")throw Y(n);var i=t+Ge(r),o="";return s.forEach(a=>{o.length>0&&(o+=`
`),o+=e+"[["+i+`]]
`,o+=Lt(i+".",e,a)}),o}function Ua(t,e,r,s){var n=t+Ge(r),i="";return xs(s).length>0&&(i+=e+"["+n+`]
`),i+Lt(n+".",e,s)}});var Ps=w(vt=>{"use strict";vt.parse=Es();vt.stringify=Ns()});var ks=w((Mt,Bt)=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});function Ya(t){return t.encrypted}var jt=(t,e)=>{let r;typeof e=="function"?r={connect:e}:r=e;let s=typeof r.connect=="function",n=typeof r.secureConnect=="function",i=typeof r.close=="function",o=()=>{s&&r.connect(),Ya(t)&&n&&(t.authorized?r.secureConnect():t.authorizationError||t.once("secureConnect",r.secureConnect)),i&&t.once("close",r.close)};t.writable&&!t.connecting?o():t.connecting?t.once("connect",o):t.destroyed&&i&&r.close(t._hadError)};Mt.default=jt;Bt.exports=jt;Bt.exports.default=jt});var Fs=w((Af,Bs)=>{"use strict";var Xa="text/plain",ec="us-ascii",Ms=(t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),tc=(t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:s,data:n,hash:i}=r.groups,o=s.split(";");i=e?"":i;let a=!1;o[o.length-1]==="base64"&&(o.pop(),a=!0);let c=(o.shift()||"").toLowerCase(),d=[...o.map(g=>{let[_,m=""]=g.split("=").map(x=>x.trim());return _==="charset"&&(m=m.toLowerCase(),m===ec)?"":`${_}${m?`=${m}`:""}`}).filter(Boolean)];return a&&d.push("base64"),(d.length!==0||c&&c!==Xa)&&d.unshift(c),`data:${d.join(";")},${a?n.trim():n}${i?`#${i}`:""}`},rc=(t,e)=>{if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return tc(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let n=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&n.protocol==="https:"&&(n.protocol="http:"),e.forceHttps&&n.protocol==="http:"&&(n.protocol="https:"),e.stripAuthentication&&(n.username="",n.password=""),e.stripHash?n.hash="":e.stripTextFragment&&(n.hash=n.hash.replace(/#?:~:text.*?$/i,"")),n.pathname&&(n.pathname=n.pathname.replace(/(?<!\b(?:[a-z][a-z\d+\-.]{1,50}:))\/{2,}/g,"/")),n.pathname)try{n.pathname=decodeURI(n.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let o=n.pathname.split("/"),a=o[o.length-1];Ms(a,e.removeDirectoryIndex)&&(o=o.slice(0,o.length-1),n.pathname=o.slice(1).join("/")+"/")}if(n.hostname&&(n.hostname=n.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)(?:[a-z\-\d]{1,63})\.(?:[a-z.\-\d]{2,63})$/.test(n.hostname)&&(n.hostname=n.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let o of[...n.searchParams.keys()])Ms(o,e.removeQueryParameters)&&n.searchParams.delete(o);e.removeQueryParameters===!0&&(n.search=""),e.sortQueryParameters&&n.searchParams.sort(),e.removeTrailingSlash&&(n.pathname=n.pathname.replace(/\/$/,""));let i=t;return t=n.toString(),!e.removeSingleSlash&&n.pathname==="/"&&!i.endsWith("/")&&n.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||n.pathname==="/")&&n.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t};Bs.exports=rc});var Ds=w((Sf,zs)=>{zs.exports=$s;function $s(t,e){if(t&&e)return $s(t)(e);if(typeof t!="function")throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(s){r[s]=t[s]}),r;function r(){for(var s=new Array(arguments.length),n=0;n<s.length;n++)s[n]=arguments[n];var i=t.apply(this,s),o=s[s.length-1];return typeof i=="function"&&i!==o&&Object.keys(o).forEach(function(a){i[a]=o[a]}),i}}});var $t=w((Of,Ft)=>{var Vs=Ds();Ft.exports=Vs(Ze);Ft.exports.strict=Vs(Ws);Ze.proto=Ze(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Ze(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Ws(this)},configurable:!0})});function Ze(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function Ws(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},r=t.name||"Function wrapped with `once`";return e.onceError=r+" shouldn't be called more than once",e.called=!1,e}});var Ks=w((Nf,Js)=>{var sc=$t(),nc=function(){},ic=function(t){return t.setHeader&&typeof t.abort=="function"},oc=function(t){return t.stdio&&Array.isArray(t.stdio)&&t.stdio.length===3},Gs=function(t,e,r){if(typeof e=="function")return Gs(t,null,e);e||(e={}),r=sc(r||nc);var s=t._writableState,n=t._readableState,i=e.readable||e.readable!==!1&&t.readable,o=e.writable||e.writable!==!1&&t.writable,a=!1,c=function(){t.writable||u()},u=function(){o=!1,i||r.call(t)},d=function(){i=!1,o||r.call(t)},g=function(b){r.call(t,b?new Error("exited with error code: "+b):null)},_=function(b){r.call(t,b)},m=function(){process.nextTick(x)},x=function(){if(!a){if(i&&!(n&&n.ended&&!n.destroyed))return r.call(t,new Error("premature close"));if(o&&!(s&&s.ended&&!s.destroyed))return r.call(t,new Error("premature close"))}},f=function(){t.req.on("finish",u)};return ic(t)?(t.on("complete",u),t.on("abort",m),t.req?f():t.on("request",f)):o&&!s&&(t.on("end",c),t.on("close",c)),oc(t)&&t.on("exit",g),t.on("end",d),t.on("finish",u),e.error!==!1&&t.on("error",_),t.on("close",m),function(){a=!0,t.removeListener("complete",u),t.removeListener("abort",m),t.removeListener("request",f),t.req&&t.req.removeListener("finish",u),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",u),t.removeListener("exit",g),t.removeListener("end",d),t.removeListener("error",_),t.removeListener("close",m)}};Js.exports=Gs});var Zs=w((Pf,Ys)=>{var ac=$t(),cc=Ks(),zt=require("fs"),be=function(){},hc=/^v?\.0/.test(process.version),Xe=function(t){return typeof t=="function"},uc=function(t){return!hc||!zt?!1:(t instanceof(zt.ReadStream||be)||t instanceof(zt.WriteStream||be))&&Xe(t.close)},lc=function(t){return t.setHeader&&Xe(t.abort)},fc=function(t,e,r,s){s=ac(s);var n=!1;t.on("close",function(){n=!0}),cc(t,{readable:e,writable:r},function(o){if(o)return s(o);n=!0,s()});var i=!1;return function(o){if(!n&&!i){if(i=!0,uc(t))return t.close(be);if(lc(t))return t.abort();if(Xe(t.destroy))return t.destroy();s(o||new Error("stream was destroyed"))}}},Qs=function(t){t()},dc=function(t,e){return t.pipe(e)},pc=function(){var t=Array.prototype.slice.call(arguments),e=Xe(t[t.length-1]||be)&&t.pop()||be;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var r,s=t.map(function(n,i){var o=i<t.length-1,a=i>0;return fc(n,o,a,function(c){r||(r=c),c&&s.forEach(Qs),!o&&(s.forEach(Qs),e(r))})});return t.reduce(dc)};Ys.exports=pc});var en=w((Hf,Xs)=>{"use strict";var{PassThrough:mc}=require("stream");Xs.exports=t=>{t={...t};let{array:e}=t,{encoding:r}=t,s=r==="buffer",n=!1;e?n=!(r||s):r=r||"utf8",s&&(r=null);let i=new mc({objectMode:n});r&&i.setEncoding(r);let o=0,a=[];return i.on("data",c=>{a.push(c),n?o=a.length:o+=c.length}),i.getBufferedValue=()=>e?a:s?Buffer.concat(a,o):a.join(""),i.getBufferedLength=()=>o,i}});var tn=w((If,ae)=>{"use strict";var{constants:gc}=require("buffer"),yc=Zs(),bc=en(),et=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function tt(t,e){if(!t)return Promise.reject(new Error("Expected a stream"));e={maxBuffer:1/0,...e};let{maxBuffer:r}=e,s;return await new Promise((n,i)=>{let o=a=>{a&&s.getBufferedLength()<=gc.MAX_LENGTH&&(a.bufferedData=s.getBufferedValue()),i(a)};s=yc(t,bc(e),a=>{if(a){o(a);return}n()}),s.on("data",()=>{s.getBufferedLength()>r&&o(new et)})}),s.getBufferedValue()}ae.exports=tt;ae.exports.default=tt;ae.exports.buffer=(t,e)=>tt(t,{...e,encoding:"buffer"});ae.exports.array=(t,e)=>tt(t,{...e,array:!0});ae.exports.MaxBufferError=et});var sn=w((kf,rn)=>{"use strict";var _c=new Set([200,203,204,206,300,301,404,405,410,414,501]),wc=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),Ec=new Set([500,502,503,504]),xc={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},Tc={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function X(t){let e=parseInt(t,10);return isFinite(e)?e:0}function Cc(t){return t?Ec.has(t.status):!0}function Dt(t){let e={};if(!t)return e;let r=t.trim().split(/\s*,\s*/);for(let s of r){let[n,i]=s.split(/\s*=\s*/,2);e[n]=i===void 0?!0:i.replace(/^"|"$/g,"")}return e}function Rc(t){let e=[];for(let r in t){let s=t[r];e.push(s===!0?r:r+"="+s)}if(!!e.length)return e.join(", ")}rn.exports=class{constructor(e,r,{shared:s,cacheHeuristic:n,immutableMinTimeToLive:i,ignoreCargoCult:o,_fromObject:a}={}){if(a){this._fromObject(a);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=s!==!1,this._cacheHeuristic=n!==void 0?n:.1,this._immutableMinTtl=i!==void 0?i:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=Dt(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=Dt(e.headers["cache-control"]),o&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":Rc(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&wc.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||_c.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=Dt(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let s of r)if(e.headers[s]!==this._reqHeaders[s])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let s in e)xc[s]||(r[s]=e[s]);if(e.connection){let s=e.connection.trim().split(/\s*,\s*/);for(let n of s)delete r[n]}if(r.warning){let s=r.warning.split(/,/).filter(n=>!/^\s*1[0-9][0-9]/.test(n));s.length?r.warning=s.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return X(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return X(this._rescc["s-maxage"])}if(this._rescc["max-age"])return X(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let s=Date.parse(this._resHeaders.expires);return Number.isNaN(s)||s<r?0:Math.max(e,(s-r)/1e3)}if(this._resHeaders["last-modified"]){let s=Date.parse(this._resHeaders["last-modified"]);if(isFinite(s)&&r>s)return Math.max(e,(r-s)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+X(this._rescc["stale-if-error"]),s=e+X(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,s)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+X(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+X(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let n=r["if-none-match"].split(/,/).filter(i=>!/^\s*W\//.test(i));n.length?r["if-none-match"]=n.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&Cc(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let s=!1;if(r.status!==void 0&&r.status!=304?s=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?s=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?s=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?s=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(s=!0),!s)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let n={};for(let o in this._resHeaders)n[o]=o in r.headers&&!Tc[o]?r.headers[o]:this._resHeaders[o];let i=Object.assign({},r,{status:this._status,method:this._method,headers:n});return{policy:new this.constructor(e,i,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var Vt=w((qf,nn)=>{"use strict";nn.exports=t=>{let e={};for(let[r,s]of Object.entries(t))e[r.toLowerCase()]=s;return e}});var an=w((vf,on)=>{"use strict";var Ac=require("stream").Readable,Sc=Vt(),Wt=class extends Ac{constructor(e,r,s,n){if(typeof e!="number")throw new TypeError("Argument `statusCode` should be a number");if(typeof r!="object")throw new TypeError("Argument `headers` should be an object");if(!(s instanceof Buffer))throw new TypeError("Argument `body` should be a buffer");if(typeof n!="string")throw new TypeError("Argument `url` should be a string");super(),this.statusCode=e,this.headers=Sc(r),this.body=s,this.url=n}_read(){this.push(this.body),this.push(null)}};on.exports=Wt});var hn=w((Uf,cn)=>{"use strict";var Oc=["destroy","setTimeout","socket","headers","trailers","rawHeaders","statusCode","httpVersion","httpVersionMinor","httpVersionMajor","rawTrailers","statusMessage"];cn.exports=(t,e)=>{let r=new Set(Object.keys(t).concat(Oc));for(let s of r)s in e||(e[s]=typeof t[s]=="function"?t[s].bind(t):t[s])}});var ln=w((jf,un)=>{"use strict";var Nc=require("stream").PassThrough,Pc=hn(),Hc=t=>{if(!(t&&t.pipe))throw new TypeError("Parameter `response` must be a response stream.");let e=new Nc;return Pc(t,e),t.pipe(e)};un.exports=Hc});var Jt=w(Gt=>{Gt.stringify=function t(e){if(typeof e>"u")return e;if(e&&Buffer.isBuffer(e))return JSON.stringify(":base64:"+e.toString("base64"));if(e&&e.toJSON&&(e=e.toJSON()),e&&typeof e=="object"){var r="",s=Array.isArray(e);r=s?"[":"{";var n=!0;for(var i in e){var o=typeof e[i]=="function"||!s&&typeof e[i]>"u";Object.hasOwnProperty.call(e,i)&&!o&&(n||(r+=","),n=!1,s?e[i]==null?r+="null":r+=t(e[i]):e[i]!==void 0&&(r+=t(i)+":"+t(e[i])))}return r+=s?"]":"}",r}else return typeof e=="string"?JSON.stringify(/^:/.test(e)?":"+e:e):typeof e>"u"?"null":JSON.stringify(e)};Gt.parse=function(t){return JSON.parse(t,function(e,r){return typeof r=="string"?/^:base64:/.test(r)?Buffer.from(r.substring(8),"base64"):/^:/.test(r)?r.substring(1):r:r})}});var dn=w((Bf,fn)=>{"use strict";fn.exports=(t={},e={})=>{let r={...t.params||{},...e.params||{}};return{...t,...e,...Object.keys(r).length?{params:r}:{}}}});var bn=w((Ff,st)=>{"use strict";var{promisify:gn}=require("util"),rt=Jt(),yn=require("zlib"),pn=dn(),Ic=gn(yn.brotliCompress),Lc=gn(yn.brotliDecompress),mn=t=>t,kc=({enable:t=!0,serialize:e=rt.stringify,deserialize:r=rt.parse,compressOptions:s,decompressOptions:n}={})=>t?{serialize:e,deserialize:r,compress:async(i,o={})=>{if(i===void 0)return i;let a=e(i);return Ic(a,pn(s,o))},decompress:async(i,o={})=>i===void 0?i:r(await Lc(i,pn(n,o)))}:{serialize:e,deserialize:r,decompress:mn,compress:mn};st.exports=kc;st.exports.stringify=rt.stringify;st.exports.parse=rt.parse});var xn=w(($f,En)=>{"use strict";var qc=require("events"),_n=Jt(),vc=bn(),Uc=t=>{let e={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(t.adapter||t.uri){let r=t.adapter||/^[^:+]*/.exec(t.uri)[0];return new(require(e[r]))(t)}return new Map},wn=["sqlite","postgres","mysql","mongo","redis","tiered"],Kt=class extends qc{constructor(e,{emitErrors:r=!0,...s}={}){if(super(),this.opts={namespace:"keyv",serialize:_n.stringify,deserialize:_n.parse,...typeof e=="string"?{uri:e}:e,...s},!this.opts.store){let i={...this.opts};this.opts.store=Uc(i)}if(this.opts.compress){let i=vc(this.opts.compress.opts);this.opts.serialize=async({value:o,expires:a})=>i.serialize({value:await i.compress(o),expires:a}),this.opts.deserialize=async o=>{let{value:a,expires:c}=i.deserialize(o);return{value:await i.decompress(a),expires:c}}}typeof this.opts.store.on=="function"&&r&&this.opts.store.on("error",i=>this.emit("error",i)),this.opts.store.namespace=this.opts.namespace;let n=i=>async function*(){for await(let[o,a]of typeof i=="function"?i(this.opts.store.namespace):i){let c=this.opts.deserialize(a);if(!(this.opts.store.namespace&&!o.includes(this.opts.store.namespace))){if(typeof c.expires=="number"&&Date.now()>c.expires){this.delete(o);continue}yield[this._getKeyUnprefix(o),c.value]}}};typeof this.opts.store[Symbol.iterator]=="function"&&this.opts.store instanceof Map?this.iterator=n(this.opts.store):typeof this.opts.store.iterator=="function"&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=n(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return wn.includes(this.opts.store.opts.dialect)||wn.findIndex(e=>this.opts.store.opts.url.includes(e))>=0}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}_getKeyPrefixArray(e){return e.map(r=>`${this.opts.namespace}:${r}`)}_getKeyUnprefix(e){return e.split(":").splice(1).join(":")}get(e,r){let{store:s}=this.opts,n=Array.isArray(e),i=n?this._getKeyPrefixArray(e):this._getKeyPrefix(e);if(n&&s.getMany===void 0){let o=[];for(let a of i)o.push(Promise.resolve().then(()=>s.get(a)).then(c=>typeof c=="string"?this.opts.deserialize(c):c).then(c=>{if(c!=null)return typeof c.expires=="number"&&Date.now()>c.expires?this.delete(a).then(()=>{}):r&&r.raw?c:c.value}));return Promise.allSettled(o).then(a=>{let c=[];for(let u of a)c.push(u.value);return c})}return Promise.resolve().then(()=>n?s.getMany(i):s.get(i)).then(o=>typeof o=="string"?this.opts.deserialize(o):o).then(o=>{if(o!=null){if(n){let a=[];for(let c of o){if(typeof c=="string"&&(c=this.opts.deserialize(c)),c==null){a.push(void 0);continue}typeof c.expires=="number"&&Date.now()>c.expires?(this.delete(e).then(()=>{}),a.push(void 0)):a.push(r&&r.raw?c:c.value)}return a}return typeof o.expires=="number"&&Date.now()>o.expires?this.delete(e).then(()=>{}):r&&r.raw?o:o.value}})}set(e,r,s){let n=this._getKeyPrefix(e);typeof s>"u"&&(s=this.opts.ttl),s===0&&(s=void 0);let{store:i}=this.opts;return Promise.resolve().then(()=>{let o=typeof s=="number"?Date.now()+s:null;return typeof r=="symbol"&&this.emit("error","symbol cannot be serialized"),r={value:r,expires:o},this.opts.serialize(r)}).then(o=>i.set(n,o,s)).then(()=>!0)}delete(e){let{store:r}=this.opts;if(Array.isArray(e)){let n=this._getKeyPrefixArray(e);if(r.deleteMany===void 0){let i=[];for(let o of n)i.push(r.delete(o));return Promise.allSettled(i).then(o=>o.every(a=>a.value===!0))}return Promise.resolve().then(()=>r.deleteMany(n))}let s=this._getKeyPrefix(e);return Promise.resolve().then(()=>r.delete(s))}clear(){let{store:e}=this.opts;return Promise.resolve().then(()=>e.clear())}has(e){let r=this._getKeyPrefix(e),{store:s}=this.opts;return Promise.resolve().then(async()=>typeof s.has=="function"?s.has(r):await s.get(r)!==void 0)}disconnect(){let{store:e}=this.opts;if(typeof e.disconnect=="function")return e.disconnect()}};En.exports=Kt});var Rn=w((zf,Cn)=>{"use strict";var jc=require("events"),nt=require("url"),Mc=Fs(),Bc=tn(),Qt=sn(),Tn=an(),Fc=Vt(),$c=ln(),zc=xn(),M=class{constructor(e,r){if(typeof e!="function")throw new TypeError("Parameter `request` must be a function");return this.cache=new zc({uri:typeof r=="string"&&r,store:typeof r!="string"&&r,namespace:"cacheable-request"}),this.createCacheableRequest(e)}createCacheableRequest(e){return(r,s)=>{let n;if(typeof r=="string")n=Yt(nt.parse(r)),r={};else if(r instanceof nt.URL)n=Yt(nt.parse(r.toString())),r={};else{let[g,..._]=(r.path||"").split("?"),m=_.length>0?`?${_.join("?")}`:"";n=Yt({...r,pathname:g,search:m})}r={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...r,...Dc(n)},r.headers=Fc(r.headers);let i=new jc,o=Mc(nt.format(n),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),a=`${r.method}:${o}`,c=!1,u=!1,d=g=>{u=!0;let _=!1,m,x=new Promise(b=>{m=()=>{_||(_=!0,b())}}),f=b=>{if(c&&!g.forceRefresh){b.status=b.statusCode;let R=Qt.fromObject(c.cachePolicy).revalidatedPolicy(g,b);if(!R.modified){let E=R.policy.responseHeaders();b=new Tn(c.statusCode,E,c.body,c.url),b.cachePolicy=R.policy,b.fromCache=!0}}b.fromCache||(b.cachePolicy=new Qt(g,b,g),b.fromCache=!1);let T;g.cache&&b.cachePolicy.storable()?(T=$c(b),(async()=>{try{let R=Bc.buffer(b);if(await Promise.race([x,new Promise(B=>b.once("end",B))]),_)return;let E=await R,C={cachePolicy:b.cachePolicy.toObject(),url:b.url,statusCode:b.fromCache?c.statusCode:b.statusCode,body:E},H=g.strictTtl?b.cachePolicy.timeToLive():void 0;g.maxTtl&&(H=H?Math.min(H,g.maxTtl):g.maxTtl),await this.cache.set(a,C,H)}catch(R){i.emit("error",new M.CacheError(R))}})()):g.cache&&c&&(async()=>{try{await this.cache.delete(a)}catch(R){i.emit("error",new M.CacheError(R))}})(),i.emit("response",T||b),typeof s=="function"&&s(T||b)};try{let b=e(g,f);b.once("error",m),b.once("abort",m),i.emit("request",b)}catch(b){i.emit("error",new M.RequestError(b))}};return(async()=>{let g=async m=>{await Promise.resolve();let x=m.cache?await this.cache.get(a):void 0;if(typeof x>"u")return d(m);let f=Qt.fromObject(x.cachePolicy);if(f.satisfiesWithoutRevalidation(m)&&!m.forceRefresh){let b=f.responseHeaders(),T=new Tn(x.statusCode,b,x.body,x.url);T.cachePolicy=f,T.fromCache=!0,i.emit("response",T),typeof s=="function"&&s(T)}else c=x,m.headers=f.revalidationHeaders(m),d(m)},_=m=>i.emit("error",new M.CacheError(m));this.cache.once("error",_),i.on("response",()=>this.cache.removeListener("error",_));try{await g(r)}catch(m){r.automaticFailover&&!u&&d(r),i.emit("error",new M.CacheError(m))}})(),i}}};function Dc(t){let e={...t};return e.path=`${t.pathname||"/"}${t.search||""}`,delete e.pathname,delete e.search,e}function Yt(t){return{protocol:t.protocol,auth:t.auth,hostname:t.hostname||t.host||"localhost",port:t.port,pathname:t.pathname,search:t.search}}M.RequestError=class extends Error{constructor(t){super(t.message),this.name="RequestError",Object.assign(this,t)}};M.CacheError=class extends Error{constructor(t){super(t.message),this.name="CacheError",Object.assign(this,t)}};Cn.exports=M});var Sn=w((Wf,An)=>{"use strict";var Vc=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];An.exports=(t,e)=>{if(e._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set(Object.keys(t).concat(Vc)),s={};for(let n of r)n in e||(s[n]={get(){let i=t[n];return typeof i=="function"?i.bind(t):i},set(i){t[n]=i},enumerable:!0,configurable:!1});return Object.defineProperties(e,s),t.once("aborted",()=>{e.destroy(),e.emit("aborted")}),t.once("close",()=>{t.complete&&e.readable?e.once("end",()=>{e.emit("close")}):e.emit("close")}),e}});var Nn=w((Gf,On)=>{"use strict";var{Transform:Wc,PassThrough:Gc}=require("stream"),Zt=require("zlib"),Jc=Sn();On.exports=t=>{let e=(t.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(e))return t;let r=e==="br";if(r&&typeof Zt.createBrotliDecompress!="function")return t.destroy(new Error("Brotli is not supported on Node.js < 12")),t;let s=!0,n=new Wc({transform(a,c,u){s=!1,u(null,a)},flush(a){a()}}),i=new Gc({autoDestroy:!1,destroy(a,c){t.destroy(),c(a)}}),o=r?Zt.createBrotliDecompress():Zt.createUnzip();return o.once("error",a=>{if(s&&!t.readable){i.end();return}i.destroy(a)}),Jc(t,i),t.pipe(n).pipe(o).pipe(i),i}});var Hn=w((Jf,Pn)=>{"use strict";var{PassThrough:Kc}=require("stream");Pn.exports=t=>{t={...t};let{array:e}=t,{encoding:r}=t,s=r==="buffer",n=!1;e?n=!(r||s):r=r||"utf8",s&&(r=null);let i=new Kc({objectMode:n});r&&i.setEncoding(r);let o=0,a=[];return i.on("data",c=>{a.push(c),n?o=a.length:o+=c.length}),i.getBufferedValue=()=>e?a:s?Buffer.concat(a,o):a.join(""),i.getBufferedLength=()=>o,i}});var In=w((Kf,_e)=>{"use strict";var{constants:Qc}=require("buffer"),Yc=require("stream"),{promisify:Zc}=require("util"),Xc=Hn(),eh=Zc(Yc.pipeline),it=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function Xt(t,e){if(!t)throw new Error("Expected a stream");e={maxBuffer:1/0,...e};let{maxBuffer:r}=e,s=Xc(e);return await new Promise((n,i)=>{let o=a=>{a&&s.getBufferedLength()<=Qc.MAX_LENGTH&&(a.bufferedData=s.getBufferedValue()),i(a)};(async()=>{try{await eh(t,s),n()}catch(a){o(a)}})(),s.on("data",()=>{s.getBufferedLength()>r&&o(new it)})}),s.getBufferedValue()}_e.exports=Xt;_e.exports.buffer=(t,e)=>Xt(t,{...e,encoding:"buffer"});_e.exports.array=(t,e)=>Xt(t,{...e,array:!0});_e.exports.MaxBufferError=it});var Kn=w((Od,ur)=>{"use strict";var{V4MAPPED:ih,ADDRCONFIG:oh,ALL:Jn,promises:{Resolver:zn},lookup:ah}=require("dns"),{promisify:cr}=require("util"),ch=require("os"),he=Symbol("cacheableLookupCreateConnection"),hr=Symbol("cacheableLookupInstance"),Dn=Symbol("expires"),hh=typeof Jn=="number",Vn=t=>{if(!(t&&typeof t.createConnection=="function"))throw new Error("Expected an Agent instance as the first argument")},uh=t=>{for(let e of t)e.family!==6&&(e.address=`::ffff:${e.address}`,e.family=6)},Wn=()=>{let t=!1,e=!1;for(let r of Object.values(ch.networkInterfaces()))for(let s of r)if(!s.internal&&(s.family==="IPv6"?e=!0:t=!0,t&&e))return{has4:t,has6:e};return{has4:t,has6:e}},lh=t=>Symbol.iterator in t,lt=t=>t.catch(e=>{if(e.code==="ENODATA"||e.code==="ENOTFOUND"||e.code==="ENOENT")return[];throw e}),Gn={ttl:!0},fh={all:!0},dh={all:!0,family:4},ph={all:!0,family:6},ft=class{constructor({cache:e=new Map,maxTtl:r=1/0,fallbackDuration:s=3600,errorTtl:n=.15,resolver:i=new zn,lookup:o=ah}={}){if(this.maxTtl=r,this.errorTtl=n,this._cache=e,this._resolver=i,this._dnsLookup=o&&cr(o),this._resolver instanceof zn?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=cr(this._resolver.resolve4.bind(this._resolver)),this._resolve6=cr(this._resolver.resolve6.bind(this._resolver))),this._iface=Wn(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,this.fallbackDuration=s,s>0){let a=setInterval(()=>{this._hostnamesToFallback.clear()},s*1e3);a.unref&&a.unref(),this._fallbackInterval=a}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,r,s){if(typeof r=="function"?(s=r,r={}):typeof r=="number"&&(r={family:r}),!s)throw new Error("Callback must be a function.");this.lookupAsync(e,r).then(n=>{r.all?s(null,n):s(null,n.address,n.family,n.expires,n.ttl,n.source)},s)}async lookupAsync(e,r={}){typeof r=="number"&&(r={family:r});let s=await this.query(e);if(r.family===6){let n=s.filter(i=>i.family===6);r.hints&ih&&(hh&&r.hints&Jn||n.length===0)?uh(s):s=n}else r.family===4&&(s=s.filter(n=>n.family===4));if(r.hints&oh){let{_iface:n}=this;s=s.filter(i=>i.family===6?n.has6:n.has4)}if(s.length===0){let n=new Error(`cacheableLookup ENOTFOUND ${e}`);throw n.code="ENOTFOUND",n.hostname=e,n}return r.all?s:s[0]}async query(e){let r="cache",s=await this._cache.get(e);if(!s){let n=this._pending[e];if(n)s=await n;else{r="query";let i=this.queryAndCache(e);this._pending[e]=i;try{s=await i}finally{delete this._pending[e]}}}return s=s.map(n=>({...n,source:r})),s}async _resolve(e){let[r,s]=await Promise.all([lt(this._resolve4(e,Gn)),lt(this._resolve6(e,Gn))]),n=0,i=0,o=0,a=Date.now();for(let c of r)c.family=4,c.expires=a+c.ttl*1e3,n=Math.max(n,c.ttl);for(let c of s)c.family=6,c.expires=a+c.ttl*1e3,i=Math.max(i,c.ttl);return r.length>0?s.length>0?o=Math.min(n,i):o=n:o=i,{entries:[...r,...s],cacheTtl:o}}async _lookup(e){try{let[r,s]=await Promise.all([lt(this._dnsLookup(e,dh)),lt(this._dnsLookup(e,ph))]);return{entries:[...r,...s],cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,r,s){if(this.maxTtl>0&&s>0){s=Math.min(s,this.maxTtl)*1e3,r[Dn]=Date.now()+s;try{await this._cache.set(e,r,s)}catch(n){this.lookupAsync=async()=>{let i=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw i.cause=n,i}}lh(this._cache)&&this._tick(s)}}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,fh);let r=await this._resolve(e);r.entries.length===0&&this._dnsLookup&&(r=await this._lookup(e),r.entries.length!==0&&this.fallbackDuration>0&&this._hostnamesToFallback.add(e));let s=r.entries.length===0?this.errorTtl:r.cacheTtl;return await this._set(e,r.entries,s),r.entries}_tick(e){let r=this._nextRemovalTime;(!r||e<r)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let s=1/0,n=Date.now();for(let[i,o]of this._cache){let a=o[Dn];n>=a?this._cache.delete(i):a<s&&(s=a)}s!==1/0&&this._tick(s-n)},e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(Vn(e),he in e)throw new Error("CacheableLookup has been already installed");e[he]=e.createConnection,e[hr]=this,e.createConnection=(r,s)=>("lookup"in r||(r.lookup=this.lookup),e[he](r,s))}uninstall(e){if(Vn(e),e[he]){if(e[hr]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[he],delete e[he],delete e[hr]}}updateInterfaceInfo(){let{_iface:e}=this;this._iface=Wn(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){if(e){this._cache.delete(e);return}this._cache.clear()}};ur.exports=ft;ur.exports.default=ft});var fr=w((Nd,Qn)=>{"use strict";var lr=class{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,r){if(this.cache.set(e,r),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(let[s,n]of this.oldCache.entries())this.onEviction(s,n);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){let r=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,r),r}}set(e,r){return this.cache.has(e)?this.cache.set(e,r):this._set(e,r),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e))return this.oldCache.get(e)}delete(e){let r=this.cache.delete(e);return r&&this._size--,this.oldCache.delete(e)||r}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache)yield e;for(let e of this.oldCache){let[r]=e;this.cache.has(r)||(yield e)}}get size(){let e=0;for(let r of this.oldCache.keys())this.cache.has(r)||e++;return Math.min(this._size+e,this.maxSize)}};Qn.exports=lr});var dr=w((Pd,Yn)=>{"use strict";Yn.exports=t=>{if(t.listenerCount("error")!==0)return t;t.__destroy=t._destroy,t._destroy=(...r)=>{let s=r.pop();t.__destroy(...r,async n=>{await Promise.resolve(),s(n)})};let e=r=>{Promise.resolve().then(()=>{t.emit("error",r)})};return t.once("error",e),Promise.resolve().then(()=>{t.off("error",e)}),t}});var te=w((Hd,si)=>{"use strict";var{URL:Zn}=require("url"),mh=require("events"),gh=require("tls"),yh=require("http2"),bh=fr(),_h=dr(),k=Symbol("currentStreamCount"),Xn=Symbol("request"),q=Symbol("cachedOriginSet"),K=Symbol("gracefullyClosing"),dt=Symbol("length"),ei=["createConnection","maxDeflateDynamicTableSize","maxSettings","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","peerMaxConcurrentStreams","settings","family","localAddress","rejectUnauthorized","pskCallback","minDHSize","path","socket","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","pfx","secureOptions","secureProtocol","sessionIdContext","ticketKeys"],wh=(t,e,r)=>{let s=0,n=t.length;for(;s<n;){let i=s+n>>>1;r(t[i],e)?s=i+1:n=i}return s},Eh=(t,e)=>t.remoteSettings.maxConcurrentStreams>e.remoteSettings.maxConcurrentStreams,pr=(t,e)=>{for(let r=0;r<t.length;r++){let s=t[r];s[q].length>0&&s[q].length<e[q].length&&s[q].every(n=>e[q].includes(n))&&s[k]+e[k]<=e.remoteSettings.maxConcurrentStreams&&ri(s)}},ti=(t,e)=>{for(let r=0;r<t.length;r++){let s=t[r];if(e[q].length>0&&e[q].length<s[q].length&&e[q].every(n=>s[q].includes(n))&&e[k]+s[k]<=s.remoteSettings.maxConcurrentStreams)return ri(e),!0}return!1},ri=t=>{t[K]=!0,t[k]===0&&t.close()},Q=class extends mh{constructor({timeout:e=0,maxSessions:r=Number.POSITIVE_INFINITY,maxEmptySessions:s=10,maxCachedTlsSessions:n=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=r,this.maxEmptySessions=s,this._emptySessionCount=0,this._sessionCount=0,this.settings={enablePush:!1,initialWindowSize:1024*1024*32},this.tlsSessionCache=new bh({maxSize:n})}get protocol(){return"https:"}normalizeOptions(e){let r="";for(let s=0;s<ei.length;s++){let n=ei[s];r+=":",e&&e[n]!==void 0&&(r+=e[n])}return r}_processQueue(){if(this._sessionCount>=this.maxSessions){this.closeEmptySessions(this.maxSessions-this._sessionCount+1);return}for(let e in this.queue)for(let r in this.queue[e]){let s=this.queue[e][r];s.completed||(s.completed=!0,s())}}_isBetterSession(e,r){return e>r}_accept(e,r,s,n){let i=0;for(;i<r.length&&e[k]<e.remoteSettings.maxConcurrentStreams;)r[i].resolve(e),i++;r.splice(0,i),r.length>0&&(this.getSession(s,n,r),r.length=0)}getSession(e,r,s){return new Promise((n,i)=>{Array.isArray(s)&&s.length>0?(s=[...s],n()):s=[{resolve:n,reject:i}];try{if(typeof e=="string")e=new Zn(e);else if(!(e instanceof Zn))throw new TypeError("The `origin` argument needs to be a string or an URL object");if(r){let{servername:d}=r,{hostname:g}=e;if(d&&g!==d)throw new Error(`Origin ${g} differs from servername ${d}`)}}catch(d){for(let g=0;g<s.length;g++)s[g].reject(d);return}let o=this.normalizeOptions(r),a=e.origin;if(o in this.sessions){let d=this.sessions[o],g=-1,_=-1,m;for(let x=0;x<d.length;x++){let f=d[x],b=f.remoteSettings.maxConcurrentStreams;if(b<g)break;if(!f[q].includes(a))continue;let T=f[k];T>=b||f[K]||f.destroyed||(m||(g=b),this._isBetterSession(T,_)&&(m=f,_=T))}if(m){this._accept(m,s,a,r);return}}if(o in this.queue){if(a in this.queue[o]){this.queue[o][a].listeners.push(...s);return}}else this.queue[o]={[dt]:0};let c=()=>{o in this.queue&&this.queue[o][a]===u&&(delete this.queue[o][a],--this.queue[o][dt]===0&&delete this.queue[o])},u=async()=>{this._sessionCount++;let d=`${a}:${o}`,g=!1,_;try{let m={...r};m.settings===void 0&&(m.settings=this.settings),m.session===void 0&&(m.session=this.tlsSessionCache.get(d)),_=await(m.createConnection||this.createConnection).call(this,e,m),m.createConnection=()=>_;let f=yh.connect(e,m);f[k]=0,f[K]=!1;let b=()=>{let{socket:E}=f,C;return E.servername===!1?(E.servername=E.remoteAddress,C=f.originSet,E.servername=!1):C=f.originSet,C},T=()=>f[k]<f.remoteSettings.maxConcurrentStreams;f.socket.once("session",E=>{this.tlsSessionCache.set(d,E)}),f.once("error",E=>{for(let C=0;C<s.length;C++)s[C].reject(E);this.tlsSessionCache.delete(d)}),f.setTimeout(this.timeout,()=>{f.destroy()}),f.once("close",()=>{if(this._sessionCount--,g){this._emptySessionCount--;let E=this.sessions[o];E.length===1?delete this.sessions[o]:E.splice(E.indexOf(f),1)}else{c();let E=new Error("Session closed without receiving a SETTINGS frame");E.code="HTTP2WRAPPER_NOSETTINGS";for(let C=0;C<s.length;C++)s[C].reject(E)}this._processQueue()});let R=()=>{let E=this.queue[o];if(!E)return;let C=f[q];for(let H=0;H<C.length;H++){let B=C[H];if(B in E){let{listeners:ne,completed:na}=E[B],Be=0;for(;Be<ne.length&&T();)ne[Be].resolve(f),Be++;if(E[B].listeners.splice(0,Be),E[B].listeners.length===0&&!na&&(delete E[B],--E[dt]===0)){delete this.queue[o];break}if(!T())break}}};f.on("origin",()=>{f[q]=b()||[],f[K]=!1,ti(this.sessions[o],f),!(f[K]||!T())&&(R(),T()&&pr(this.sessions[o],f))}),f.once("remoteSettings",()=>{if(u.destroyed){let E=new Error("Agent has been destroyed");for(let C=0;C<s.length;C++)s[C].reject(E);f.destroy();return}if(f.setLocalWindowSize&&f.setLocalWindowSize(1024*1024*4),f[q]=b()||[],f.socket.encrypted){let E=f[q][0];if(E!==a){let C=new Error(`Requested origin ${a} does not match server ${E}`);for(let H=0;H<s.length;H++)s[H].reject(C);f.destroy();return}}c();{let E=this.sessions;if(o in E){let C=E[o];C.splice(wh(C,f,Eh),0,f)}else E[o]=[f]}g=!0,this._emptySessionCount++,this.emit("session",f),this._accept(f,s,a,r),f[k]===0&&this._emptySessionCount>this.maxEmptySessions&&this.closeEmptySessions(this._emptySessionCount-this.maxEmptySessions),f.on("remoteSettings",()=>{!T()||(R(),T()&&pr(this.sessions[o],f))})}),f[Xn]=f.request,f.request=(E,C)=>{if(f[K])throw new Error("The session is gracefully closing. No new streams are allowed.");let H=f[Xn](E,C);return f.ref(),f[k]++===0&&this._emptySessionCount--,H.once("close",()=>{if(--f[k]===0&&(this._emptySessionCount++,f.unref(),this._emptySessionCount>this.maxEmptySessions||f[K])){f.close();return}f.destroyed||f.closed||T()&&!ti(this.sessions[o],f)&&(pr(this.sessions[o],f),R(),f[k]===0&&this._processQueue())}),H}}catch(m){c(),this._sessionCount--;for(let x=0;x<s.length;x++)s[x].reject(m)}};u.listeners=s,u.completed=!1,u.destroyed=!1,this.queue[o][a]=u,this.queue[o][dt]++,this._processQueue()})}request(e,r,s,n){return new Promise((i,o)=>{this.getSession(e,r,[{reject:o,resolve:a=>{try{let c=a.request(s,n);_h(c),i(c)}catch(c){o(c)}}}])})}async createConnection(e,r){return Q.connect(e,r)}static connect(e,r){r.ALPNProtocols=["h2"];let s=e.port||443,n=e.hostname;typeof r.servername>"u"&&(r.servername=n);let i=gh.connect(s,n,r);return r.socket&&(i._peername={family:void 0,address:void 0,port:s}),i}closeEmptySessions(e=Number.POSITIVE_INFINITY){let r=0,{sessions:s}=this;for(let n in s){let i=s[n];for(let o=0;o<i.length;o++){let a=i[o];if(a[k]===0&&(r++,a.close(),r>=e))return r}}return r}destroy(e){let{sessions:r,queue:s}=this;for(let n in r){let i=r[n];for(let o=0;o<i.length;o++)i[o].destroy(e)}for(let n in s){let i=s[n];for(let o in i)i[o].destroyed=!0}this.queue={},this.tlsSessionCache.clear()}get emptySessionCount(){return this._emptySessionCount}get pendingSessionCount(){return this._sessionCount-this._emptySessionCount}get sessionCount(){return this._sessionCount}};Q.kCurrentStreamCount=k;Q.kGracefullyClosing=K;si.exports={Agent:Q,globalAgent:new Q}});var gr=w((Id,ni)=>{"use strict";var{Readable:xh}=require("stream"),mr=class extends xh{constructor(e,r){super({emitClose:!1,autoDestroy:!0,highWaterMark:r}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this._dumped=!1}get connection(){return this.socket}set connection(e){this.socket=e}_destroy(e,r){this.readableEnded||(this.aborted=!0),r(),this.req._request.destroy(e)}setTimeout(e,r){return this.req.setTimeout(e,r),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}};ni.exports=mr});var oi=w((Ld,ii)=>{"use strict";ii.exports=(t,e,r)=>{for(let s of r)t.on(s,(...n)=>e.emit(s,...n))}});var Pe=w((qd,ai)=>{"use strict";var re=(t,e,r)=>{ai.exports[e]=class extends t{constructor(...n){super(typeof r=="string"?r:r(n)),this.name=`${super.name} [${e}]`,this.code=e}}};re(TypeError,"ERR_INVALID_ARG_TYPE",t=>{let e=t[0].includes(".")?"property":"argument",r=t[1],s=Array.isArray(r);return s&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${t[0]}" ${e} must be ${s?"one of":"of"} type ${r}. Received ${typeof t[2]}`});re(TypeError,"ERR_INVALID_PROTOCOL",t=>`Protocol "${t[0]}" not supported. Expected "${t[1]}"`);re(Error,"ERR_HTTP_HEADERS_SENT",t=>`Cannot ${t[0]} headers after they are sent to the client`);re(TypeError,"ERR_INVALID_HTTP_TOKEN",t=>`${t[0]} must be a valid HTTP token [${t[1]}]`);re(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",t=>`Invalid value "${t[0]} for header "${t[1]}"`);re(TypeError,"ERR_INVALID_CHAR",t=>`Invalid character in ${t[0]} [${t[1]}]`);re(Error,"ERR_HTTP2_NO_SOCKET_MANIPULATION","HTTP/2 sockets should not be directly manipulated (e.g. read and written)")});var hi=w((vd,ci)=>{"use strict";ci.exports=t=>{switch(t){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}});var yr=w((Ud,ui)=>{"use strict";var{ERR_INVALID_HTTP_TOKEN:Th}=Pe(),Ch=hi(),Rh=/^[\^`\-\w!#$%&*+.|~]+$/;ui.exports=t=>{if(typeof t!="string"||!Rh.test(t)&&!Ch(t))throw new Th("Header name",t)}});var br=w((jd,li)=>{"use strict";var{ERR_HTTP_INVALID_HEADER_VALUE:Ah,ERR_INVALID_CHAR:Sh}=Pe(),Oh=/[^\t\u0020-\u007E\u0080-\u00FF]/;li.exports=(t,e)=>{if(typeof e>"u")throw new Ah(e,t);if(Oh.test(e))throw new Sh("header content",t)}});var pi=w((Md,di)=>{"use strict";var{ERR_HTTP2_NO_SOCKET_MANIPULATION:fi}=Pe(),Nh={has(t,e){let r=t.session===void 0?t:t.session.socket;return e in t||e in r},get(t,e){switch(e){case"on":case"once":case"end":case"emit":case"destroy":return t[e].bind(t);case"writable":case"destroyed":return t[e];case"readable":return t.destroyed?!1:t.readable;case"setTimeout":{let{session:r}=t;return r!==void 0?r.setTimeout.bind(r):t.setTimeout.bind(t)}case"write":case"read":case"pause":case"resume":throw new fi;default:{let r=t.session===void 0?t:t.session.socket,s=r[e];return typeof s=="function"?s.bind(r):s}}},getPrototypeOf(t){return t.session!==void 0?Reflect.getPrototypeOf(t.session.socket):Reflect.getPrototypeOf(t)},set(t,e,r){switch(e){case"writable":case"readable":case"destroyed":case"on":case"once":case"end":case"emit":case"destroy":return t[e]=r,!0;case"setTimeout":{let{session:s}=t;return s===void 0?t.setTimeout=r:s.setTimeout=r,!0}case"write":case"read":case"pause":case"resume":throw new fi;default:{let s=t.session===void 0?t:t.session.socket;return s[e]=r,!0}}}};di.exports=Nh});var xr=w((Bd,wi)=>{"use strict";var{URL:_r,urlToHttpOptions:mi}=require("url"),Ph=require("http2"),{Writable:Hh}=require("stream"),{Agent:Ih,globalAgent:Lh}=te(),kh=gr(),qh=oi(),{ERR_INVALID_ARG_TYPE:pt,ERR_INVALID_PROTOCOL:vh,ERR_HTTP_HEADERS_SENT:gi}=Pe(),Uh=yr(),jh=br(),Mh=pi(),{HTTP2_HEADER_STATUS:yi,HTTP2_HEADER_METHOD:bi,HTTP2_HEADER_PATH:_i,HTTP2_HEADER_AUTHORITY:He,HTTP2_METHOD_CONNECT:Bh}=Ph.constants,I=Symbol("headers"),ue=Symbol("origin"),Ie=Symbol("session"),wr=Symbol("options"),mt=Symbol("flushedHeaders"),Le=Symbol("jobs"),ke=Symbol("pendingAgentPromise"),Er=class extends Hh{constructor(e,r,s){if(super({autoDestroy:!1,emitClose:!1}),typeof e=="string"?e=mi(new _r(e)):e instanceof _r?e=mi(e):e={...e},typeof r=="function"||r===void 0?(s=r,r=e):r=Object.assign(e,r),r.h2session){if(this[Ie]=r.h2session,this[Ie].destroyed)throw new Error("The session has been closed already");this.protocol=this[Ie].socket.encrypted?"https:":"http:"}else if(r.agent===!1)this.agent=new Ih({maxEmptySessions:0});else if(typeof r.agent>"u"||r.agent===null)this.agent=Lh;else if(typeof r.agent.request=="function")this.agent=r.agent;else throw new pt("options.agent",["http2wrapper.Agent-like Object","undefined","false"],r.agent);if(this.agent&&(this.protocol=this.agent.protocol),r.protocol&&r.protocol!==this.protocol)throw new vh(r.protocol,this.protocol);r.port||(r.port=r.defaultPort||this.agent&&this.agent.defaultPort||443),r.host=r.hostname||r.host||"localhost",delete r.hostname;let{timeout:n}=r;r.timeout=void 0,this[I]=Object.create(null),this[Le]=[],this[ke]=void 0,this.socket=null,this.connection=null,this.method=r.method||"GET",this.method==="CONNECT"&&(r.path==="/"||r.path===void 0)||(this.path=r.path),this.res=null,this.aborted=!1,this.reusedSocket=!1;let{headers:i}=r;if(i)for(let a in i)this.setHeader(a,i[a]);r.auth&&!("authorization"in this[I])&&(this[I].authorization="Basic "+Buffer.from(r.auth).toString("base64")),r.session=r.tlsSession,r.path=r.socketPath,this[wr]=r,this[ue]=new _r(`${this.protocol}//${r.servername||r.host}:${r.port}`);let o=r._reuseSocket;o&&(r.createConnection=(...a)=>o.destroyed?this.agent.createConnection(...a):o,this.agent.getSession(this[ue],this[wr]).catch(()=>{})),n&&this.setTimeout(n),s&&this.once("response",s),this[mt]=!1}get method(){return this[I][bi]}set method(e){e&&(this[I][bi]=e.toUpperCase())}get path(){let e=this.method==="CONNECT"?He:_i;return this[I][e]}set path(e){if(e){let r=this.method==="CONNECT"?He:_i;this[I][r]=e}}get host(){return this[ue].hostname}set host(e){}get _mustNotHaveABody(){return this.method==="GET"||this.method==="HEAD"||this.method==="DELETE"}_write(e,r,s){if(this._mustNotHaveABody){s(new Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();let n=()=>this._request.write(e,r,s);this._request?n():this[Le].push(n)}_final(e){this.flushHeaders();let r=()=>{if(this._mustNotHaveABody||this.method==="CONNECT"){e();return}this._request.end(e)};this._request?r():this[Le].push(r)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}async _destroy(e,r){this.res&&this.res._dump(),this._request?this._request.destroy():process.nextTick(()=>{this.emit("close")});try{await this[ke]}catch(s){this.aborted&&(e=s)}r(e)}async flushHeaders(){if(this[mt]||this.destroyed)return;this[mt]=!0;let e=this.method===Bh,r=s=>{if(this._request=s,this.destroyed){s.destroy();return}e||qh(s,this,["timeout","continue"]),s.once("error",i=>{this.destroy(i)}),s.once("aborted",()=>{let{res:i}=this;i?(i.aborted=!0,i.emit("aborted"),i.destroy()):this.destroy(new Error("The server aborted the HTTP/2 stream"))});let n=(i,o,a)=>{let c=new kh(this.socket,s.readableHighWaterMark);this.res=c,c.url=`${this[ue].origin}${this.path}`,c.req=this,c.statusCode=i[yi],c.headers=i,c.rawHeaders=a,c.once("end",()=>{c.complete=!0,c.socket=null,c.connection=null}),e?(c.upgrade=!0,this.emit("connect",c,s,Buffer.alloc(0))?this.emit("close"):s.destroy()):(s.on("data",u=>{!c._dumped&&!c.push(u)&&s.pause()}),s.once("end",()=>{this.aborted||c.push(null)}),this.emit("response",c)||c._dump())};s.once("response",n),s.once("headers",i=>this.emit("information",{statusCode:i[yi]})),s.once("trailers",(i,o,a)=>{let{res:c}=this;if(c===null){n(i,o,a);return}c.trailers=i,c.rawTrailers=a}),s.once("close",()=>{let{aborted:i,res:o}=this;if(o){i&&(o.aborted=!0,o.emit("aborted"),o.destroy());let a=()=>{o.emit("close"),this.destroy(),this.emit("close")};o.readable?o.once("end",a):a();return}if(!this.destroyed){this.destroy(new Error("The HTTP/2 stream has been early terminated")),this.emit("close");return}this.destroy(),this.emit("close")}),this.socket=new Proxy(s,Mh);for(let i of this[Le])i();this.emit("socket",this.socket)};if(!(He in this[I])&&!e&&(this[I][He]=this[ue].host),this[Ie])try{r(this[Ie].request(this[I]))}catch(s){this.destroy(s)}else{this.reusedSocket=!0;try{let s=this.agent.request(this[ue],this[wr],this[I]);this[ke]=s,r(await s),this[ke]=!1}catch(s){this[ke]=!1,this.destroy(s)}}}get connection(){return this.socket}set connection(e){this.socket=e}getHeaderNames(){return Object.keys(this[I])}hasHeader(e){if(typeof e!="string")throw new pt("name","string",e);return Boolean(this[I][e.toLowerCase()])}getHeader(e){if(typeof e!="string")throw new pt("name","string",e);return this[I][e.toLowerCase()]}get headersSent(){return this[mt]}removeHeader(e){if(typeof e!="string")throw new pt("name","string",e);if(this.headersSent)throw new gi("remove");delete this[I][e.toLowerCase()]}setHeader(e,r){if(this.headersSent)throw new gi("set");Uh(e),jh(e,r);let s=e.toLowerCase();if(s==="connection"){if(r.toLowerCase()==="keep-alive")return;throw new Error(`Invalid 'connection' header: ${r}`)}s==="host"&&this.method==="CONNECT"?this[I][He]=r:this[I][s]=r}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,r){let s=()=>this._request.setTimeout(e,r);return this._request?s():this[Le].push(s),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}};wi.exports=Er});var xi=w((Fd,Ei)=>{"use strict";var Fh=require("tls");Ei.exports=(t={},e=Fh.connect)=>new Promise((r,s)=>{let n=!1,i,o=async()=>{await c,i.off("timeout",a),i.off("error",s),t.resolveSocket?(r({alpnProtocol:i.alpnProtocol,socket:i,timeout:n}),n&&(await Promise.resolve(),i.emit("timeout"))):(i.destroy(),r({alpnProtocol:i.alpnProtocol,timeout:n}))},a=async()=>{n=!0,o()},c=(async()=>{try{i=await e(t,o),i.on("error",s),i.once("timeout",a)}catch(u){s(u)}})()})});var Ci=w(($d,Ti)=>{"use strict";var{isIP:$h}=require("net"),zh=require("assert"),Dh=t=>{if(t[0]==="["){let r=t.indexOf("]");return zh(r!==-1),t.slice(1,r)}let e=t.indexOf(":");return e===-1?t:t.slice(0,e)};Ti.exports=t=>{let e=Dh(t);return $h(e)?"":e}});var Ii=w((zd,qe)=>{"use strict";var{URL:Ri,urlToHttpOptions:Ai}=require("url"),Si=require("http"),Tr=require("https"),Vh=xi(),Wh=fr(),{Agent:Gh,globalAgent:Jh}=te(),Kh=xr(),Qh=Ci(),Oi=dr(),Ni=new Wh({maxSize:100}),Yh=new Map,Zh=(t,e,r)=>{e._httpMessage={shouldKeepAlive:!0};let s=()=>{t.emit("free",e,r)};e.on("free",s);let n=()=>{t.removeSocket(e,r)};e.on("close",n);let i=()=>{let{freeSockets:a}=t;for(let c of Object.values(a))if(c.includes(e)){e.destroy();return}};e.on("timeout",i);let o=()=>{t.removeSocket(e,r),e.off("close",n),e.off("free",s),e.off("timeout",i),e.off("agentRemove",o)};e.on("agentRemove",o),t.emit("free",e,r)},Pi=(t,e=new Map,r=void 0)=>async s=>{let n=`${s.host}:${s.port}:${s.ALPNProtocols.sort()}`;if(!t.has(n)){if(e.has(n))return{alpnProtocol:(await e.get(n)).alpnProtocol};let{path:i}=s;s.path=s.socketPath;let o=Vh(s,r);e.set(n,o);try{let a=await o;return t.set(n,a.alpnProtocol),e.delete(n),s.path=i,a}catch(a){throw e.delete(n),s.path=i,a}}return{alpnProtocol:t.get(n)}},Hi=Pi(Ni,Yh);qe.exports=async(t,e,r)=>{if(typeof t=="string"?t=Ai(new Ri(t)):t instanceof Ri?t=Ai(t):t={...t},typeof e=="function"||e===void 0?(r=e,e=t):e=Object.assign(t,e),e.ALPNProtocols=e.ALPNProtocols||["h2","http/1.1"],!Array.isArray(e.ALPNProtocols)||e.ALPNProtocols.length===0)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");e.protocol=e.protocol||"https:";let s=e.protocol==="https:";e.host=e.hostname||e.host||"localhost",e.session=e.tlsSession,e.servername=e.servername||Qh(e.headers&&e.headers.host||e.host),e.port=e.port||(s?443:80),e._defaultAgent=s?Tr.globalAgent:Si.globalAgent;let n=e.resolveProtocol||Hi,{agent:i}=e;if(i!==void 0&&i!==!1&&i.constructor.name!=="Object")throw new Error("The `options.agent` can be only an object `http`, `https` or `http2` properties");if(s){e.resolveSocket=!0;let{socket:o,alpnProtocol:a,timeout:c}=await n(e);if(c){o&&o.destroy();let d=new Error(`Timed out resolving ALPN: ${e.timeout} ms`);throw d.code="ETIMEDOUT",d.ms=e.timeout,d}o&&e.createConnection&&(o.destroy(),o=void 0),delete e.resolveSocket;let u=a==="h2";if(i&&(i=u?i.http2:i.https,e.agent=i),i===void 0&&(i=u?Jh:Tr.globalAgent),o)if(i===!1)o.destroy();else{let d=(u?Gh:Tr.Agent).prototype.createConnection;i.createConnection===d?u?e._reuseSocket=o:Zh(i,o,e):o.destroy()}if(u)return Oi(new Kh(e,r))}else i&&(e.agent=i.http);return Oi(Si.request(e,r))};qe.exports.protocolCache=Ni;qe.exports.resolveProtocol=Hi;qe.exports.createResolveProtocol=Pi});var Cr=w((Dd,Li)=>{"use strict";var Xh=require("stream"),eu=require("tls"),tu=new eu.TLSSocket(new Xh.PassThrough)._handle._parentWrap.constructor;Li.exports=tu});var Ar=w((Vd,ki)=>{"use strict";var Rr=class extends Error{constructor(e){super(`The proxy server rejected the request with status code ${e}`),this.statusCode=e}};ki.exports=Rr});var vi=w((Wd,qi)=>{"use strict";var ru=(t,e,r)=>{if(!r.some(n=>typeof n==="string"?typeof e===n:e instanceof n)){let n=r.map(i=>typeof i=="string"?i:i.name);throw new TypeError(`Expected '${t}' to be a type of ${n.join(" or ")}, got ${typeof e}`)}};qi.exports=ru});var Sr=w((Gd,ji)=>{"use strict";var{URL:Ui}=require("url"),gt=vi();ji.exports=(t,e)=>{gt("proxyOptions",e,["object"]),gt("proxyOptions.headers",e.headers,["object","undefined"]),gt("proxyOptions.raw",e.raw,["boolean","undefined"]),gt("proxyOptions.url",e.url,[Ui,"string"]);let r=new Ui(e.url);t.proxyOptions={raw:!0,...e,headers:{...e.headers},url:r}}});var yt=w((Jd,Mi)=>{"use strict";Mi.exports=t=>{let{username:e,password:r}=t.proxyOptions.url;if(e||r){let s=`${e}:${r}`,n=`Basic ${Buffer.from(s).toString("base64")}`;return{"proxy-authorization":n,authorization:n}}return{}}});var Di=w((Kd,zi)=>{"use strict";var su=require("tls"),nu=require("http"),Bi=require("https"),iu=Cr(),{globalAgent:ou}=te(),au=Ar(),Fi=Sr(),cu=yt(),$i=(t,e,r)=>{(async()=>{try{let{proxyOptions:s}=t,{url:n,headers:i,raw:o}=s,a=await ou.request(n,s,{...cu(t),...i,":method":"CONNECT",":authority":`${e.host}:${e.port}`});a.once("error",r),a.once("response",c=>{let u=c[":status"];if(u!==200){r(new au(u));return}let d=t instanceof Bi.Agent;if(o&&d){e.socket=a;let _=su.connect(e);_.once("close",()=>{a.destroy()}),r(null,_);return}let g=new iu(a);g.encrypted=!1,g._handle.getpeername=_=>{_.family=void 0,_.address=void 0,_.port=void 0},r(null,g)})}catch(s){r(s)}})()},Or=class extends nu.Agent{constructor(e){super(e),Fi(this,e.proxyOptions)}createConnection(e,r){$i(this,e,r)}},Nr=class extends Bi.Agent{constructor(e){super(e),Fi(this,e.proxyOptions)}createConnection(e,r){$i(this,e,r)}};zi.exports={HttpOverHttp2:Or,HttpsOverHttp2:Nr}});var Hr=w((Qd,Vi)=>{"use strict";var{Agent:hu}=te(),uu=Cr(),lu=Ar(),fu=Sr(),Pr=class extends hu{constructor(e){super(e),fu(this,e.proxyOptions)}async createConnection(e,r){let s=`${e.hostname}:${e.port||443}`,[n,i]=await this._getProxyStream(s);if(i!==200)throw new lu(i);if(this.proxyOptions.raw)r.socket=n;else{let o=new uu(n);return o.encrypted=!1,o._handle.getpeername=a=>{a.family=void 0,a.address=void 0,a.port=void 0},o}return super.createConnection(e,r)}};Vi.exports=Pr});var Gi=w((Yd,Wi)=>{"use strict";var{globalAgent:du}=te(),pu=Hr(),mu=yt(),gu=t=>new Promise((e,r)=>{t.once("error",r),t.once("response",s=>{t.off("error",r),e(s[":status"])})}),Ir=class extends pu{async _getProxyStream(e){let{proxyOptions:r}=this,s={...mu(this),...r.headers,":method":"CONNECT",":authority":e},n=await du.request(r.url,r,s),i=await gu(n);return[n,i]}};Wi.exports=Ir});var Ki=w((Zd,Ji)=>{"use strict";var yu=require("http"),bu=require("https"),_u=Hr(),wu=yt(),Eu=t=>new Promise((e,r)=>{let s=(n,i,o)=>{i.unshift(o),t.off("error",r),e([i,n.statusCode])};t.once("error",r),t.once("connect",s)}),bt=class extends _u{async _getProxyStream(e){let{proxyOptions:r}=this,{url:s,headers:n}=this.proxyOptions,o=(s.protocol==="https:"?bu:yu).request({...r,hostname:s.hostname,port:s.port,path:e,headers:{...wu(this),...n,host:e},method:"CONNECT"}).end();return Eu(o)}};Ji.exports={Http2OverHttp:bt,Http2OverHttps:bt}});var Yi=w((Xd,Qi)=>{"use strict";var xu=require("http2"),{Agent:Tu,globalAgent:Cu}=te(),Lr=xr(),Ru=gr(),Au=Ii(),{HttpOverHttp2:Su,HttpsOverHttp2:Ou}=Di(),Nu=Gi(),{Http2OverHttp:Pu,Http2OverHttps:Hu}=Ki(),Iu=yr(),Lu=br(),ku=(t,e,r)=>new Lr(t,e,r),qu=(t,e,r)=>{let s=new Lr(t,e,r);return s.end(),s};Qi.exports={...xu,ClientRequest:Lr,IncomingMessage:Ru,Agent:Tu,globalAgent:Cu,request:ku,get:qu,auto:Au,proxies:{HttpOverHttp2:Su,HttpsOverHttp2:Ou,Http2OverHttp2:Nu,Http2OverHttp:Pu,Http2OverHttps:Hu},validateHeaderName:Iu,validateHeaderValue:Lu}});var Br=w(V=>{"use strict";var po=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",el=po+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",mo="["+po+"]["+el+"]*",tl=new RegExp("^"+mo+"$"),rl=function(t,e){let r=[],s=e.exec(t);for(;s;){let n=[];n.startIndex=e.lastIndex-s[0].length;let i=s.length;for(let o=0;o<i;o++)n.push(s[o]);r.push(n),s=e.exec(t)}return r},sl=function(t){let e=tl.exec(t);return!(e===null||typeof e>"u")};V.isExist=function(t){return typeof t<"u"};V.isEmptyObject=function(t){return Object.keys(t).length===0};V.merge=function(t,e,r){if(e){let s=Object.keys(e),n=s.length;for(let i=0;i<n;i++)r==="strict"?t[s[i]]=[e[s[i]]]:t[s[i]]=e[s[i]]}};V.getValue=function(t){return V.isExist(t)?t:""};V.isName=sl;V.getAllMatches=rl;V.nameRegexp=mo});var $r=w(wo=>{"use strict";var Fr=Br(),nl={allowBooleanAttributes:!1,unpairedTags:[]};wo.validate=function(t,e){e=Object.assign({},nl,e);let r=[],s=!1,n=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let i=0;i<t.length;i++)if(t[i]==="<"&&t[i+1]==="?"){if(i+=2,i=yo(t,i),i.err)return i}else if(t[i]==="<"){let o=i;if(i++,t[i]==="!"){i=bo(t,i);continue}else{let a=!1;t[i]==="/"&&(a=!0,i++);let c="";for(;i<t.length&&t[i]!==">"&&t[i]!==" "&&t[i]!=="	"&&t[i]!==`
`&&t[i]!=="\r";i++)c+=t[i];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),i--),!fl(c)){let g;return c.trim().length===0?g="Invalid space after '<'.":g="Tag '"+c+"' is an invalid name.",P("InvalidTag",g,j(t,i))}let u=al(t,i);if(u===!1)return P("InvalidAttr","Attributes for '"+c+"' have open quote.",j(t,i));let d=u.value;if(i=u.index,d[d.length-1]==="/"){let g=i-d.length;d=d.substring(0,d.length-1);let _=_o(d,e);if(_===!0)s=!0;else return P(_.err.code,_.err.msg,j(t,g+_.err.line))}else if(a)if(u.tagClosed){if(d.trim().length>0)return P("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",j(t,o));{let g=r.pop();if(c!==g.tagName){let _=j(t,g.tagStartPos);return P("InvalidTag","Expected closing tag '"+g.tagName+"' (opened in line "+_.line+", col "+_.col+") instead of closing tag '"+c+"'.",j(t,o))}r.length==0&&(n=!0)}}else return P("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",j(t,i));else{let g=_o(d,e);if(g!==!0)return P(g.err.code,g.err.msg,j(t,i-d.length+g.err.line));if(n===!0)return P("InvalidXml","Multiple possible root nodes found.",j(t,i));e.unpairedTags.indexOf(c)!==-1||r.push({tagName:c,tagStartPos:o}),s=!0}for(i++;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="!"){i++,i=bo(t,i);continue}else if(t[i+1]==="?"){if(i=yo(t,++i),i.err)return i}else break;else if(t[i]==="&"){let g=ul(t,i);if(g==-1)return P("InvalidChar","char '&' is not expected.",j(t,i));i=g}else if(n===!0&&!go(t[i]))return P("InvalidXml","Extra text at the end",j(t,i));t[i]==="<"&&i--}}else{if(go(t[i]))continue;return P("InvalidChar","char '"+t[i]+"' is not expected.",j(t,i))}if(s){if(r.length==1)return P("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",j(t,r[0].tagStartPos));if(r.length>0)return P("InvalidXml","Invalid '"+JSON.stringify(r.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return P("InvalidXml","Start tag expected.",1);return!0};function go(t){return t===" "||t==="	"||t===`
`||t==="\r"}function yo(t,e){let r=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){let s=t.substr(r,e-r);if(e>5&&s==="xml")return P("InvalidXml","XML declaration allowed only at the start of the document.",j(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function bo(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++)if(t[e]==="<")r++;else if(t[e]===">"&&(r--,r===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}var il='"',ol="'";function al(t,e){let r="",s="",n=!1;for(;e<t.length;e++){if(t[e]===il||t[e]===ol)s===""?s=t[e]:s!==t[e]||(s="");else if(t[e]===">"&&s===""){n=!0;break}r+=t[e]}return s!==""?!1:{value:r,index:e,tagClosed:n}}var cl=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function _o(t,e){let r=Fr.getAllMatches(t,cl),s={};for(let n=0;n<r.length;n++){if(r[n][1].length===0)return P("InvalidAttr","Attribute '"+r[n][2]+"' has no space in starting.",je(r[n]));if(r[n][3]!==void 0&&r[n][4]===void 0)return P("InvalidAttr","Attribute '"+r[n][2]+"' is without value.",je(r[n]));if(r[n][3]===void 0&&!e.allowBooleanAttributes)return P("InvalidAttr","boolean attribute '"+r[n][2]+"' is not allowed.",je(r[n]));let i=r[n][2];if(!ll(i))return P("InvalidAttr","Attribute '"+i+"' is an invalid name.",je(r[n]));if(!s.hasOwnProperty(i))s[i]=1;else return P("InvalidAttr","Attribute '"+i+"' is repeated.",je(r[n]))}return!0}function hl(t,e){let r=/\d/;for(t[e]==="x"&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}function ul(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,hl(t,e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(t[e]===";")break;return-1}return e}function P(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function ll(t){return Fr.isName(t)}function fl(t){return Fr.isName(t)}function j(t,e){let r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function je(t){return t.startIndex+t[1].length}});var xo=w(zr=>{var Eo={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1},dl=function(t){return Object.assign({},Eo,t)};zr.buildOptions=dl;zr.defaultOptions=Eo});var Co=w((Xp,To)=>{"use strict";var Dr=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,r){this.child.push({[e]:r})}addChild(e){e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,[":@"]:e[":@"]}):this.child.push({[e.tagname]:e.child})}};To.exports=Dr});var Ao=w((em,Ro)=>{function pl(t,e){let r={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let s=1,n=!1,i=!1,o=!1,a="";for(;e<t.length;e++)if(t[e]==="<"){if(n&&t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y")e+=7,i=!0;else if(n&&t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T")e+=8;else if(n&&t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T")e+=8;else if(n&&t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N")e+=9;else if(t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-")o=!0;else throw new Error("Invalid DOCTYPE");s++,a=""}else if(t[e]===">"){if(o)if(t[e-1]==="-"&&t[e-2]==="-")o=!1;else throw new Error("Invalid XML comment in DOCTYPE");else i&&(gl(a,r),i=!1);if(s--,s===0)break}else t[e]==="["?n=!0:a+=t[e];if(s!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:e}}var ml=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function gl(t,e){let r=ml.exec(t);r&&(e[r[1]]={regx:RegExp(`&${r[1]};`,"g"),val:r[3]})}Ro.exports=pl});var Oo=w((tm,So)=>{var yl=/^[-+]?0x[a-fA-F0-9]+$/,bl=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var _l={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function wl(t,e={}){if(e=Object.assign({},_l,e),!t||typeof t!="string")return t;let r=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(r))return t;if(e.hex&&yl.test(r))return Number.parseInt(r,16);{let s=bl.exec(r);if(s){let n=s[1],i=s[2],o=El(s[3]),a=s[4]||s[6];if(!e.leadingZeros&&i.length>0&&n&&r[2]!==".")return t;if(!e.leadingZeros&&i.length>0&&!n&&r[1]!==".")return t;{let c=Number(r),u=""+c;return u.search(/[eE]/)!==-1||a?e.eNotation?c:t:r.indexOf(".")!==-1?u==="0"&&o===""||u===o||n&&u==="-"+o?c:t:i?o===u||n+o===u?c:t:r===u||r===n+u?c:t}}else return t}}function El(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}So.exports=wl});var Po=w((sm,No)=>{"use strict";var Jr=Br(),Me=Co(),xl=Ao(),Tl=Oo(),rm="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,Jr.nameRegexp),Vr=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={amp:{regex:/&(amp|#38|#x26);/g,val:"&"},apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=Cl,this.parseXml=Nl,this.parseTextData=Rl,this.resolveNameSpace=Al,this.buildAttributesMap=Ol,this.isItStopNode=Il,this.replaceEntitiesValue=Pl,this.readStopNodeData=kl,this.saveTextToParentTag=Hl}};function Cl(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let s=e[r];this.lastEntities[s]={regex:new RegExp("&"+s+";","g"),val:t[s]}}}function Rl(t,e,r,s,n,i,o){if(t!==void 0&&(this.options.trimValues&&!s&&(t=t.trim()),t.length>0)){o||(t=this.replaceEntitiesValue(t));let a=this.options.tagValueProcessor(e,t,r,n,i);return a==null?t:typeof a!=typeof t||a!==t?a:this.options.trimValues?Gr(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?Gr(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function Al(t){if(this.options.removeNSPrefix){let e=t.split(":"),r=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=r+e[1])}return t}var Sl=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Ol(t,e){if(!this.options.ignoreAttributes&&typeof t=="string"){let r=Jr.getAllMatches(t,Sl),s=r.length,n={};for(let i=0;i<s;i++){let o=this.resolveNameSpace(r[i][1]),a=r[i][4],c=this.options.attributeNamePrefix+o;if(o.length)if(a!==void 0){this.options.trimValues&&(a=a.trim()),a=this.replaceEntitiesValue(a);let u=this.options.attributeValueProcessor(o,a,e);u==null?n[c]=a:typeof u!=typeof a||u!==a?n[c]=u:n[c]=Gr(a,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(n[c]=!0)}if(!Object.keys(n).length)return;if(this.options.attributesGroupName){let i={};return i[this.options.attributesGroupName]=n,i}return n}}var Nl=function(t){t=t.replace(/\r\n?/g,`
`);let e=new Me("!xml"),r=e,s="",n="";for(let i=0;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="/"){let a=se(t,">",i,"Closing Tag is not closed."),c=t.substring(i+2,a).trim();if(this.options.removeNSPrefix){let u=c.indexOf(":");u!==-1&&(c=c.substr(u+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&(s=this.saveTextToParentTag(s,r,n)),n=n.substr(0,n.lastIndexOf(".")),r=this.tagsNodeStack.pop(),s="",i=a}else if(t[i+1]==="?"){let a=Wr(t,i,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(s=this.saveTextToParentTag(s,r,n),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let c=new Me(a.tagName);c.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(c[":@"]=this.buildAttributesMap(a.tagExp,n)),r.addChild(c)}i=a.closeIndex+1}else if(t.substr(i+1,3)==="!--"){let a=se(t,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){let c=t.substring(i+4,a-2);s=this.saveTextToParentTag(s,r,n),r.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}i=a}else if(t.substr(i+1,2)==="!D"){let a=xl(t,i);this.docTypeEntities=a.entities,i=a.i}else if(t.substr(i+1,2)==="!["){let a=se(t,"]]>",i,"CDATA is not closed.")-2,c=t.substring(i+9,a);if(s=this.saveTextToParentTag(s,r,n),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]);else{let u=this.parseTextData(c,r.tagname,n,!0,!1,!0);u==null&&(u=""),r.add(this.options.textNodeName,u)}i=a+2}else{let a=Wr(t,i,this.options.removeNSPrefix),c=a.tagName,u=a.tagExp,d=a.attrExpPresent,g=a.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&s&&r.tagname!=="!xml"&&(s=this.saveTextToParentTag(s,r,n,!1)),c!==e.tagname&&(n+=n?"."+c:c);let _=r;if(_&&this.options.unpairedTags.indexOf(_.tagname)!==-1&&(r=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,n,c)){let m="";if(u.length>0&&u.lastIndexOf("/")===u.length-1)i=a.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)i=a.closeIndex;else{let f=this.readStopNodeData(t,c,g+1);if(!f)throw new Error(`Unexpected end of ${c}`);i=f.i,m=f.tagContent}let x=new Me(c);c!==u&&d&&(x[":@"]=this.buildAttributesMap(u,n)),m&&(m=this.parseTextData(m,c,n,!0,d,!0,!0)),n=n.substr(0,n.lastIndexOf(".")),x.add(this.options.textNodeName,m),r.addChild(x)}else{if(u.length>0&&u.lastIndexOf("/")===u.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),u=c):u=u.substr(0,u.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let m=new Me(c);c!==u&&d&&(m[":@"]=this.buildAttributesMap(u,n)),n=n.substr(0,n.lastIndexOf(".")),r.addChild(m)}else{let m=new Me(c);this.tagsNodeStack.push(r),c!==u&&d&&(m[":@"]=this.buildAttributesMap(u,n)),r.addChild(m),r=m}s="",i=g}}else s+=t[i];return e.child},Pl=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){let r=this.docTypeEntities[e];t=t.replace(r.regx,r.val)}for(let e in this.lastEntities){let r=this.lastEntities[e];t=t.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){let r=this.htmlEntities[e];t=t.replace(r.regex,r.val)}}return t};function Hl(t,e,r,s){return t&&(s===void 0&&(s=Object.keys(e.child).length===0),t=this.parseTextData(t,e.tagname,r,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,s),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function Il(t,e,r){let s="*."+r;for(let n in t){let i=t[n];if(s===i||e===i)return!0}return!1}function Ll(t,e,r=">"){let s,n="";for(let i=e;i<t.length;i++){let o=t[i];if(s)o===s&&(s="");else if(o==='"'||o==="'")s=o;else if(o===r[0])if(r[1]){if(t[i+1]===r[1])return{data:n,index:i}}else return{data:n,index:i};else o==="	"&&(o=" ");n+=o}}function se(t,e,r,s){let n=t.indexOf(e,r);if(n===-1)throw new Error(s);return n+e.length-1}function Wr(t,e,r,s=">"){let n=Ll(t,e+1,s);if(!n)return;let i=n.data,o=n.index,a=i.search(/\s/),c=i,u=!0;if(a!==-1&&(c=i.substr(0,a).replace(/\s\s*$/,""),i=i.substr(a+1)),r){let d=c.indexOf(":");d!==-1&&(c=c.substr(d+1),u=c!==n.data.substr(d+1))}return{tagName:c,tagExp:i,closeIndex:o,attrExpPresent:u}}function kl(t,e,r){let s=r,n=1;for(;r<t.length;r++)if(t[r]==="<")if(t[r+1]==="/"){let i=se(t,">",r,`${e} is not closed`);if(t.substring(r+2,i).trim()===e&&(n--,n===0))return{tagContent:t.substring(s,r),i};r=i}else if(t[r+1]==="?")r=se(t,"?>",r+1,"StopNode is not closed.");else if(t.substr(r+1,3)==="!--")r=se(t,"-->",r+3,"StopNode is not closed.");else if(t.substr(r+1,2)==="![")r=se(t,"]]>",r,"StopNode is not closed.")-2;else{let i=Wr(t,r,">");i&&((i&&i.tagName)===e&&i.tagExp[i.tagExp.length-1]!=="/"&&n++,r=i.closeIndex)}}function Gr(t,e,r){if(e&&typeof t=="string"){let s=t.trim();return s==="true"?!0:s==="false"?!1:Tl(t,r)}else return Jr.isExist(t)?t:""}No.exports=Vr});var Lo=w(Io=>{"use strict";function ql(t,e){return Ho(t,e)}function Ho(t,e,r){let s,n={};for(let i=0;i<t.length;i++){let o=t[i],a=vl(o),c="";if(r===void 0?c=a:c=r+"."+a,a===e.textNodeName)s===void 0?s=o[a]:s+=""+o[a];else{if(a===void 0)continue;if(o[a]){let u=Ho(o[a],e,c),d=jl(u,e);o[":@"]?Ul(u,o[":@"],c,e):Object.keys(u).length===1&&u[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?u=u[e.textNodeName]:Object.keys(u).length===0&&(e.alwaysCreateTextNode?u[e.textNodeName]="":u=""),n[a]!==void 0&&n.hasOwnProperty(a)?(Array.isArray(n[a])||(n[a]=[n[a]]),n[a].push(u)):e.isArray(a,c,d)?n[a]=[u]:n[a]=u}}}return typeof s=="string"?s.length>0&&(n[e.textNodeName]=s):s!==void 0&&(n[e.textNodeName]=s),n}function vl(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let s=e[r];if(s!==":@")return s}}function Ul(t,e,r,s){if(e){let n=Object.keys(e),i=n.length;for(let o=0;o<i;o++){let a=n[o];s.isArray(a,r+"."+a,!0,!0)?t[a]=[e[a]]:t[a]=e[a]}}}function jl(t,e){let r=Object.keys(t).length;return!!(r===0||r===1&&t[e.textNodeName])}Io.prettify=ql});var qo=w((im,ko)=>{var{buildOptions:Ml}=xo(),Bl=Po(),{prettify:Fl}=Lo(),$l=$r(),Kr=class{constructor(e){this.externalEntities={},this.options=Ml(e)}parse(e,r){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let i=$l.validate(e,r);if(i!==!0)throw Error(`${i.err.msg}:${i.err.line}:${i.err.col}`)}let s=new Bl(this.options);s.addExternalEntities(this.externalEntities);let n=s.parseXml(e);return this.options.preserveOrder||n===void 0?n:Fl(n,this.options)}addEntity(e,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");this.externalEntities[e]=r}};ko.exports=Kr});var Bo=w((om,Mo)=>{var zl=`
`;function Dl(t,e){return Uo(t,e,"",0)}function Uo(t,e,r,s){let n="",i="";e.format&&e.indentBy.length>0&&(i=zl+""+e.indentBy.repeat(s));for(let o=0;o<t.length;o++){let a=t[o],c=Vl(a),u="";if(r.length===0?u=c:u=`${r}.${c}`,c===e.textNodeName){let m=a[c];Wl(u,e)||(m=e.tagValueProcessor(c,m),m=jo(m,e)),n+=i+m;continue}else if(c===e.cdataPropName){n+=i+`<![CDATA[${a[c][0][e.textNodeName]}]]>`;continue}else if(c===e.commentPropName){n+=i+`<!--${a[c][0][e.textNodeName]}-->`;continue}else if(c[0]==="?"){let m=vo(a[":@"],e),x=c==="?xml"?"":i,f=a[c][0][e.textNodeName];f=f.length!==0?" "+f:"",n+=x+`<${c}${f}${m}?>`;continue}let d=vo(a[":@"],e),g=i+`<${c}${d}`,_=Uo(a[c],e,u,s+1);e.unpairedTags.indexOf(c)!==-1?e.suppressUnpairedNode?n+=g+">":n+=g+"/>":(!_||_.length===0)&&e.suppressEmptyNode?n+=g+"/>":n+=g+`>${_}${i}</${c}>`}return n}function Vl(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let s=e[r];if(s!==":@")return s}}function vo(t,e){let r="";if(t&&!e.ignoreAttributes)for(let s in t){let n=e.attributeValueProcessor(s,t[s]);n=jo(n,e),n===!0&&e.suppressBooleanAttributes?r+=` ${s.substr(e.attributeNamePrefix.length)}`:r+=` ${s.substr(e.attributeNamePrefix.length)}="${n}"`}return r}function Wl(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let s in e.stopNodes)if(e.stopNodes[s]===t||e.stopNodes[s]==="*."+r)return!0;return!1}function jo(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){let s=e.entities[r];t=t.replace(s.regex,s.val)}return t}Mo.exports=Dl});var Do=w((am,zo)=>{"use strict";var Gl=Bo(),Jl={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],transformTagName:!1};function Qr(t){this.options=Object.assign({},Jl,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=tf),this.processTextOrObjNode=Ql,this.options.format?(this.indentate=ef,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=Xl,this.buildObjNode=Yl):(this.buildTextNode=$o,this.buildObjNode=Fo),this.buildTextValNode=$o,this.buildObjectNode=Fo,this.replaceEntitiesValue=Zl,this.buildAttrPairStr=Kl}Qr.prototype.build=function(t){return this.options.preserveOrder?Gl(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)};Qr.prototype.j2x=function(t,e){let r="",s="";for(let n in t)if(!(typeof t[n]>"u"))if(t[n]===null)n[0]==="?"?s+=this.indentate(e)+"<"+n+"?"+this.tagEndChar:s+=this.indentate(e)+"<"+n+"/"+this.tagEndChar;else if(t[n]instanceof Date)s+=this.buildTextNode(t[n],n,"",e);else if(typeof t[n]!="object"){let i=this.isAttribute(n);if(i)r+=this.buildAttrPairStr(i,""+t[n]);else if(n===this.options.textNodeName){let o=this.options.tagValueProcessor(n,""+t[n]);s+=this.replaceEntitiesValue(o)}else s+=this.buildTextNode(t[n],n,"",e)}else if(Array.isArray(t[n])){let i=t[n].length;for(let o=0;o<i;o++){let a=t[n][o];typeof a>"u"||(a===null?n[0]==="?"?s+=this.indentate(e)+"<"+n+"?"+this.tagEndChar:s+=this.indentate(e)+"<"+n+"/"+this.tagEndChar:typeof a=="object"?s+=this.processTextOrObjNode(a,n,e):s+=this.buildTextNode(a,n,"",e))}}else if(this.options.attributesGroupName&&n===this.options.attributesGroupName){let i=Object.keys(t[n]),o=i.length;for(let a=0;a<o;a++)r+=this.buildAttrPairStr(i[a],""+t[n][i[a]])}else s+=this.processTextOrObjNode(t[n],n,e);return{attrStr:r,val:s}};function Kl(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'}function Ql(t,e,r){let s=this.j2x(t,r+1);return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextNode(t[this.options.textNodeName],e,s.attrStr,r):this.buildObjNode(s.val,e,s.attrStr,r)}function Fo(t,e,r,s){let n="</"+e+this.tagEndChar,i="";return e[0]==="?"&&(i="?",n=""),r&&t.indexOf("<")===-1?this.indentate(s)+"<"+e+r+i+">"+t+n:this.options.commentPropName!==!1&&e===this.options.commentPropName&&i.length===0?this.indentate(s)+`<!--${t}-->`+this.newLine:this.indentate(s)+"<"+e+r+i+this.tagEndChar+t+this.indentate(s)+n}function Yl(t,e,r,s){return t!==""?this.buildObjectNode(t,e,r,s):e[0]==="?"?this.indentate(s)+"<"+e+r+"?"+this.tagEndChar:this.indentate(s)+"<"+e+r+"/"+this.tagEndChar}function $o(t,e,r,s){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(s)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(s)+`<!--${t}-->`+this.newLine;{let n=this.options.tagValueProcessor(e,t);return n=this.replaceEntitiesValue(n),n===""&&this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode?this.indentate(s)+"<"+e+this.tagEndChar:this.indentate(s)+"<"+e+"/"+this.tagEndChar:this.indentate(s)+"<"+e+r+">"+n+"</"+e+this.tagEndChar}}function Zl(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){let r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t}function Xl(t,e,r,s){return t===""&&this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode?this.indentate(s)+"<"+e+this.tagEndChar:this.indentate(s)+"<"+e+"/"+this.tagEndChar:t!==""?this.buildTextValNode(t,e,r,s):e[0]==="?"?this.indentate(s)+"<"+e+r+"?"+this.tagEndChar:this.indentate(s)+"<"+e+r+"/"+this.tagEndChar}function ef(t){return this.options.indentBy.repeat(t)}function tf(t){return t.startsWith(this.options.attributeNamePrefix)?t.substr(this.attrPrefixLen):!1}zo.exports=Qr});var Wo=w((cm,Vo)=>{"use strict";var rf=$r(),sf=qo(),nf=Do();Vo.exports={XMLParser:sf,XMLValidator:rf,XMLBuilder:nf}});var Ot=v(Ps());var Hs=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function ja(t){return Hs.includes(t)}var Ma=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","WeakRef","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement","NaN",...Hs];function Ba(t){return Ma.includes(t)}var Fa=["null","undefined","string","number","bigint","boolean","symbol"];function $a(t){return Fa.includes(t)}function oe(t){return e=>typeof e===t}var{toString:za}=Object.prototype,pe=t=>{let e=za.call(t).slice(8,-1);if(/HTML\w+Element/.test(e)&&h.domElement(t))return"HTMLElement";if(Ba(e))return e},A=t=>e=>pe(e)===t;function h(t){if(t===null)return"null";switch(typeof t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(t)?"NaN":"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol";default:}if(h.observable(t))return"Observable";if(h.array(t))return"Array";if(h.buffer(t))return"Buffer";let e=pe(t);if(e)return e;if(t instanceof String||t instanceof Boolean||t instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}h.undefined=oe("undefined");h.string=oe("string");var Da=oe("number");h.number=t=>Da(t)&&!h.nan(t);h.bigint=oe("bigint");h.function_=oe("function");h.null_=t=>t===null;h.class_=t=>h.function_(t)&&t.toString().startsWith("class ");h.boolean=t=>t===!0||t===!1;h.symbol=oe("symbol");h.numericString=t=>h.string(t)&&!h.emptyStringOrWhitespace(t)&&!Number.isNaN(Number(t));h.array=(t,e)=>Array.isArray(t)?h.function_(e)?t.every(r=>e(r)):!0:!1;h.buffer=t=>{var e,r;return((r=(e=t==null?void 0:t.constructor)==null?void 0:e.isBuffer)==null?void 0:r.call(e,t))??!1};h.blob=t=>A("Blob")(t);h.nullOrUndefined=t=>h.null_(t)||h.undefined(t);h.object=t=>!h.null_(t)&&(typeof t=="object"||h.function_(t));h.iterable=t=>h.function_(t==null?void 0:t[Symbol.iterator]);h.asyncIterable=t=>h.function_(t==null?void 0:t[Symbol.asyncIterator]);h.generator=t=>h.iterable(t)&&h.function_(t==null?void 0:t.next)&&h.function_(t==null?void 0:t.throw);h.asyncGenerator=t=>h.asyncIterable(t)&&h.function_(t.next)&&h.function_(t.throw);h.nativePromise=t=>A("Promise")(t);var Va=t=>h.function_(t==null?void 0:t.then)&&h.function_(t==null?void 0:t.catch);h.promise=t=>h.nativePromise(t)||Va(t);h.generatorFunction=A("GeneratorFunction");h.asyncGeneratorFunction=t=>pe(t)==="AsyncGeneratorFunction";h.asyncFunction=t=>pe(t)==="AsyncFunction";h.boundFunction=t=>h.function_(t)&&!t.hasOwnProperty("prototype");h.regExp=A("RegExp");h.date=A("Date");h.error=A("Error");h.map=t=>A("Map")(t);h.set=t=>A("Set")(t);h.weakMap=t=>A("WeakMap")(t);h.weakSet=t=>A("WeakSet")(t);h.weakRef=t=>A("WeakRef")(t);h.int8Array=A("Int8Array");h.uint8Array=A("Uint8Array");h.uint8ClampedArray=A("Uint8ClampedArray");h.int16Array=A("Int16Array");h.uint16Array=A("Uint16Array");h.int32Array=A("Int32Array");h.uint32Array=A("Uint32Array");h.float32Array=A("Float32Array");h.float64Array=A("Float64Array");h.bigInt64Array=A("BigInt64Array");h.bigUint64Array=A("BigUint64Array");h.arrayBuffer=A("ArrayBuffer");h.sharedArrayBuffer=A("SharedArrayBuffer");h.dataView=A("DataView");h.enumCase=(t,e)=>Object.values(e).includes(t);h.directInstanceOf=(t,e)=>Object.getPrototypeOf(t)===e.prototype;h.urlInstance=t=>A("URL")(t);h.urlString=t=>{if(!h.string(t))return!1;try{return new URL(t),!0}catch{return!1}};h.truthy=t=>Boolean(t);h.falsy=t=>!t;h.nan=t=>Number.isNaN(t);h.primitive=t=>h.null_(t)||$a(typeof t);h.integer=t=>Number.isInteger(t);h.safeInteger=t=>Number.isSafeInteger(t);h.plainObject=t=>{if(typeof t!="object"||t===null)return!1;let e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};h.typedArray=t=>ja(pe(t));var Wa=t=>h.safeInteger(t)&&t>=0;h.arrayLike=t=>!h.nullOrUndefined(t)&&!h.function_(t)&&Wa(t.length);h.inRange=(t,e)=>{if(h.number(e))return t>=Math.min(0,e)&&t<=Math.max(e,0);if(h.array(e)&&e.length===2)return t>=Math.min(...e)&&t<=Math.max(...e);throw new TypeError(`Invalid range: ${JSON.stringify(e)}`)};var Ga=1,Ja=["innerHTML","ownerDocument","style","attributes","nodeValue"];h.domElement=t=>h.object(t)&&t.nodeType===Ga&&h.string(t.nodeName)&&!h.plainObject(t)&&Ja.every(e=>e in t);h.observable=t=>{var e,r;return t?t===((e=t[Symbol.observable])==null?void 0:e.call(t))||t===((r=t["@@observable"])==null?void 0:r.call(t)):!1};h.nodeStream=t=>h.object(t)&&h.function_(t.pipe)&&!h.observable(t);h.infinite=t=>t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY;var Is=t=>e=>h.integer(e)&&Math.abs(e%2)===t;h.evenInteger=Is(0);h.oddInteger=Is(1);h.emptyArray=t=>h.array(t)&&t.length===0;h.nonEmptyArray=t=>h.array(t)&&t.length>0;h.emptyString=t=>h.string(t)&&t.length===0;var Ka=t=>h.string(t)&&!/\S/.test(t);h.emptyStringOrWhitespace=t=>h.emptyString(t)||Ka(t);h.nonEmptyString=t=>h.string(t)&&t.length>0;h.nonEmptyStringAndNotWhitespace=t=>h.string(t)&&!h.emptyStringOrWhitespace(t);h.emptyObject=t=>h.object(t)&&!h.map(t)&&!h.set(t)&&Object.keys(t).length===0;h.nonEmptyObject=t=>h.object(t)&&!h.map(t)&&!h.set(t)&&Object.keys(t).length>0;h.emptySet=t=>h.set(t)&&t.size===0;h.nonEmptySet=t=>h.set(t)&&t.size>0;h.emptyMap=t=>h.map(t)&&t.size===0;h.nonEmptyMap=t=>h.map(t)&&t.size>0;h.propertyKey=t=>h.any([h.string,h.number,h.symbol],t);h.formData=t=>A("FormData")(t);h.urlSearchParams=t=>A("URLSearchParams")(t);var Ls=(t,e,r)=>{if(!h.function_(e))throw new TypeError(`Invalid predicate: ${JSON.stringify(e)}`);if(r.length===0)throw new TypeError("Invalid number of values");return t.call(r,e)};h.any=(t,...e)=>(h.array(t)?t:[t]).some(s=>Ls(Array.prototype.some,s,e));h.all=(t,...e)=>Ls(Array.prototype.every,t,e);var y=(t,e,r,s={})=>{if(!t){let{multipleValues:n}=s,i=n?`received values of types ${[...new Set(r.map(o=>`\`${h(o)}\``))].join(", ")}`:`received value of type \`${h(r)}\``;throw new TypeError(`Expected value which is \`${e}\`, ${i}.`)}},p={undefined:t=>y(h.undefined(t),"undefined",t),string:t=>y(h.string(t),"string",t),number:t=>y(h.number(t),"number",t),bigint:t=>y(h.bigint(t),"bigint",t),function_:t=>y(h.function_(t),"Function",t),null_:t=>y(h.null_(t),"null",t),class_:t=>y(h.class_(t),"Class",t),boolean:t=>y(h.boolean(t),"boolean",t),symbol:t=>y(h.symbol(t),"symbol",t),numericString:t=>y(h.numericString(t),"string with a number",t),array:(t,e)=>{y(h.array(t),"Array",t),e&&t.forEach(e)},buffer:t=>y(h.buffer(t),"Buffer",t),blob:t=>y(h.blob(t),"Blob",t),nullOrUndefined:t=>y(h.nullOrUndefined(t),"null or undefined",t),object:t=>y(h.object(t),"Object",t),iterable:t=>y(h.iterable(t),"Iterable",t),asyncIterable:t=>y(h.asyncIterable(t),"AsyncIterable",t),generator:t=>y(h.generator(t),"Generator",t),asyncGenerator:t=>y(h.asyncGenerator(t),"AsyncGenerator",t),nativePromise:t=>y(h.nativePromise(t),"native Promise",t),promise:t=>y(h.promise(t),"Promise",t),generatorFunction:t=>y(h.generatorFunction(t),"GeneratorFunction",t),asyncGeneratorFunction:t=>y(h.asyncGeneratorFunction(t),"AsyncGeneratorFunction",t),asyncFunction:t=>y(h.asyncFunction(t),"AsyncFunction",t),boundFunction:t=>y(h.boundFunction(t),"Function",t),regExp:t=>y(h.regExp(t),"RegExp",t),date:t=>y(h.date(t),"Date",t),error:t=>y(h.error(t),"Error",t),map:t=>y(h.map(t),"Map",t),set:t=>y(h.set(t),"Set",t),weakMap:t=>y(h.weakMap(t),"WeakMap",t),weakSet:t=>y(h.weakSet(t),"WeakSet",t),weakRef:t=>y(h.weakRef(t),"WeakRef",t),int8Array:t=>y(h.int8Array(t),"Int8Array",t),uint8Array:t=>y(h.uint8Array(t),"Uint8Array",t),uint8ClampedArray:t=>y(h.uint8ClampedArray(t),"Uint8ClampedArray",t),int16Array:t=>y(h.int16Array(t),"Int16Array",t),uint16Array:t=>y(h.uint16Array(t),"Uint16Array",t),int32Array:t=>y(h.int32Array(t),"Int32Array",t),uint32Array:t=>y(h.uint32Array(t),"Uint32Array",t),float32Array:t=>y(h.float32Array(t),"Float32Array",t),float64Array:t=>y(h.float64Array(t),"Float64Array",t),bigInt64Array:t=>y(h.bigInt64Array(t),"BigInt64Array",t),bigUint64Array:t=>y(h.bigUint64Array(t),"BigUint64Array",t),arrayBuffer:t=>y(h.arrayBuffer(t),"ArrayBuffer",t),sharedArrayBuffer:t=>y(h.sharedArrayBuffer(t),"SharedArrayBuffer",t),dataView:t=>y(h.dataView(t),"DataView",t),enumCase:(t,e)=>y(h.enumCase(t,e),"EnumCase",t),urlInstance:t=>y(h.urlInstance(t),"URL",t),urlString:t=>y(h.urlString(t),"string with a URL",t),truthy:t=>y(h.truthy(t),"truthy",t),falsy:t=>y(h.falsy(t),"falsy",t),nan:t=>y(h.nan(t),"NaN",t),primitive:t=>y(h.primitive(t),"primitive",t),integer:t=>y(h.integer(t),"integer",t),safeInteger:t=>y(h.safeInteger(t),"integer",t),plainObject:t=>y(h.plainObject(t),"plain object",t),typedArray:t=>y(h.typedArray(t),"TypedArray",t),arrayLike:t=>y(h.arrayLike(t),"array-like",t),domElement:t=>y(h.domElement(t),"HTMLElement",t),observable:t=>y(h.observable(t),"Observable",t),nodeStream:t=>y(h.nodeStream(t),"Node.js Stream",t),infinite:t=>y(h.infinite(t),"infinite number",t),emptyArray:t=>y(h.emptyArray(t),"empty array",t),nonEmptyArray:t=>y(h.nonEmptyArray(t),"non-empty array",t),emptyString:t=>y(h.emptyString(t),"empty string",t),emptyStringOrWhitespace:t=>y(h.emptyStringOrWhitespace(t),"empty string or whitespace",t),nonEmptyString:t=>y(h.nonEmptyString(t),"non-empty string",t),nonEmptyStringAndNotWhitespace:t=>y(h.nonEmptyStringAndNotWhitespace(t),"non-empty string and not whitespace",t),emptyObject:t=>y(h.emptyObject(t),"empty object",t),nonEmptyObject:t=>y(h.nonEmptyObject(t),"non-empty object",t),emptySet:t=>y(h.emptySet(t),"empty set",t),nonEmptySet:t=>y(h.nonEmptySet(t),"non-empty set",t),emptyMap:t=>y(h.emptyMap(t),"empty map",t),nonEmptyMap:t=>y(h.nonEmptyMap(t),"non-empty map",t),propertyKey:t=>y(h.propertyKey(t),"PropertyKey",t),formData:t=>y(h.formData(t),"FormData",t),urlSearchParams:t=>y(h.urlSearchParams(t),"URLSearchParams",t),evenInteger:t=>y(h.evenInteger(t),"even integer",t),oddInteger:t=>y(h.oddInteger(t),"odd integer",t),directInstanceOf:(t,e)=>y(h.directInstanceOf(t,e),"T",t),inRange:(t,e)=>y(h.inRange(t,e),"in range",t),any:(t,...e)=>y(h.any(t,...e),"predicate returns truthy for any value",e,{multipleValues:!0}),all:(t,...e)=>y(h.all(t,...e),"predicate returns truthy for all values",e,{multipleValues:!0})};Object.defineProperties(h,{class:{value:h.class_},function:{value:h.function_},null:{value:h.null_}});Object.defineProperties(p,{class:{value:p.class_},function:{value:p.function_},null:{value:p.null_}});var l=h;var uo=require("node:events");var Ut=class extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}},W=class{static fn(e){return(...r)=>new W((s,n,i)=>{r.push(i),e(...r).then(s,n)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((r,s)=>{this._reject=s;let n=a=>{(!this._isCanceled||!o.shouldReject)&&(this._isPending=!1,r(a))},i=a=>{this._isPending=!1,s(a)},o=a=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(a)};Object.defineProperties(o,{shouldReject:{get:()=>this._rejectOnCancel,set:a=>{this._rejectOnCancel=a}}}),e(n,i,o)})}then(e,r){return this._promise.then(e,r)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let r of this._cancelHandlers)r()}catch(r){this._reject(r);return}this._rejectOnCancel&&this._reject(new Ut(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(W.prototype,Promise.prototype);function Qa(t){return l.object(t)&&"_onResponse"in t}var N=class extends Error{constructor(e,r,s){var n;if(super(e),Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=r.code??"ERR_GOT_REQUEST_ERROR",this.input=r.input,Qa(s)?(Object.defineProperty(this,"request",{enumerable:!1,value:s}),Object.defineProperty(this,"response",{enumerable:!1,value:s.response}),this.options=s.options):this.options=s,this.timings=(n=this.request)==null?void 0:n.timings,l.string(r.stack)&&l.string(this.stack)){let i=this.stack.indexOf(this.message)+this.message.length,o=this.stack.slice(i).split(`
`).reverse(),a=r.stack.slice(r.stack.indexOf(r.message)+r.message.length).split(`
`).reverse();for(;a.length>0&&a[0]===o[0];)o.shift();this.stack=`${this.stack.slice(0,i)}${o.reverse().join(`
`)}${a.reverse().join(`
`)}`}}},Je=class extends N{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}},Z=class extends N{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}},Ke=class extends N{constructor(e,r){super(e.message,e,r),this.name="CacheError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_CACHE_ACCESS":this.code}},me=class extends N{constructor(e,r){super(e.message,e,r),this.name="UploadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_UPLOAD":this.code}},Qe=class extends N{constructor(e,r,s){super(e.message,e,s),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.event=e.event,this.timings=r}},ge=class extends N{constructor(e,r){super(e.message,e,r),this.name="ReadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_READING_RESPONSE_STREAM":this.code}},Ye=class extends N{constructor(e){super("Retrying",{},e),this.name="RetryError",this.code="ERR_RETRYING"}},ye=class extends N{constructor(e){super("This operation was aborted.",{},e),this.code="ERR_ABORTED",this.name="AbortError"}};var Mr=v(require("node:process"),1),xt=require("node:buffer"),ao=require("node:stream"),Tt=require("node:url"),Ue=v(require("node:http"),1);var qs=require("events"),vs=require("util"),Us=v(ks(),1),Za=t=>{if(t.timings)return t.timings;let e={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};t.timings=e;let r=o=>{o.once(qs.errorMonitor,()=>{e.error=Date.now(),e.phases.total=e.error-e.start})};r(t);let s=()=>{e.abort=Date.now(),e.phases.total=e.abort-e.start};t.prependOnceListener("abort",s);let n=o=>{if(e.socket=Date.now(),e.phases.wait=e.socket-e.start,vs.types.isProxy(o))return;let a=()=>{e.lookup=Date.now(),e.phases.dns=e.lookup-e.socket};o.prependOnceListener("lookup",a),(0,Us.default)(o,{connect:()=>{e.connect=Date.now(),e.lookup===void 0&&(o.removeListener("lookup",a),e.lookup=e.connect,e.phases.dns=e.lookup-e.socket),e.phases.tcp=e.connect-e.lookup},secureConnect:()=>{e.secureConnect=Date.now(),e.phases.tls=e.secureConnect-e.connect}})};t.socket?n(t.socket):t.prependOnceListener("socket",n);let i=()=>{e.upload=Date.now(),e.phases.request=e.upload-(e.secureConnect??e.connect)};return t.writableFinished?i():t.prependOnceListener("finish",i),t.prependOnceListener("response",o=>{e.response=Date.now(),e.phases.firstByte=e.response-e.upload,o.timings=e,r(o),o.prependOnceListener("end",()=>{t.off("abort",s),o.off("aborted",s),!e.phases.total&&(e.end=Date.now(),e.phases.download=e.end-e.response,e.phases.total=e.end-e.start)}),o.prependOnceListener("aborted",s)}),e},js=Za;var jr=v(Rn(),1),co=v(Nn(),1);var ho=v(In(),1);var Ln="abcdefghijklmnopqrstuvwxyz0123456789";function kn(){let t=16,e="";for(;t--;)e+=Ln[Math.random()*Ln.length<<0];return e}var er=t=>String(t).replace(/\r|\n/g,(e,r,s)=>e==="\r"&&s[r+1]!==`
`||e===`
`&&s[r-1]!=="\r"?`\r
`:e);var th=t=>Object.prototype.toString.call(t).slice(8,-1).toLowerCase();function tr(t){if(th(t)!=="object")return!1;let e=Object.getPrototypeOf(t);return e==null?!0:(e.constructor&&e.constructor.toString())===Object.toString()}function qn(t,e){if(typeof e!="string")return t[e];for(let[r,s]of Object.entries(t))if(e.toLowerCase()===r.toLowerCase())return s}var vn=t=>new Proxy(t,{get:(e,r)=>qn(e,r),has:(e,r)=>qn(e,r)!==void 0});var $=t=>typeof t=="function";var ce=t=>Boolean(t&&$(t.constructor)&&t[Symbol.toStringTag]==="FormData"&&$(t.append)&&$(t.getAll)&&$(t.entries)&&$(t[Symbol.iterator]));var rr=t=>String(t).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22");var G=t=>Boolean(t&&typeof t=="object"&&$(t.constructor)&&t[Symbol.toStringTag]==="File"&&$(t.stream)&&t.name!=null);var we=function(t,e,r,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(t,r):n?n.value=r:e.set(t,r),r},O=function(t,e,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(t):s?s.value:e.get(t)},Ee,J,xe,ot,Te,ee,Ce,Re,at,sr,Un,rh={enableAdditionalHeaders:!1},ct={writable:!1,configurable:!1},ht=class{constructor(e,r,s){if(Ee.add(this),J.set(this,`\r
`),xe.set(this,void 0),ot.set(this,void 0),Te.set(this,"-".repeat(2)),ee.set(this,new TextEncoder),Ce.set(this,void 0),Re.set(this,void 0),at.set(this,void 0),!ce(e))throw new TypeError("Expected first argument to be a FormData instance.");let n;if(tr(r)?s=r:n=r,n||(n=kn()),typeof n!="string")throw new TypeError("Expected boundary argument to be a string.");if(s&&!tr(s))throw new TypeError("Expected options argument to be an object.");we(this,Re,Array.from(e.entries()),"f"),we(this,at,{...rh,...s},"f"),we(this,xe,O(this,ee,"f").encode(O(this,J,"f")),"f"),we(this,ot,O(this,xe,"f").byteLength,"f"),this.boundary=`form-data-boundary-${n}`,this.contentType=`multipart/form-data; boundary=${this.boundary}`,we(this,Ce,O(this,ee,"f").encode(`${O(this,Te,"f")}${this.boundary}${O(this,Te,"f")}${O(this,J,"f").repeat(2)}`),"f");let i={"Content-Type":this.contentType},o=O(this,Ee,"m",Un).call(this);o&&(this.contentLength=o,i["Content-Length"]=o),this.headers=vn(Object.freeze(i)),Object.defineProperties(this,{boundary:ct,contentType:ct,contentLength:ct,headers:ct})}getContentLength(){return this.contentLength==null?void 0:Number(this.contentLength)}*values(){for(let[e,r]of O(this,Re,"f")){let s=G(r)?r:O(this,ee,"f").encode(er(r));yield O(this,Ee,"m",sr).call(this,e,s),yield s,yield O(this,xe,"f")}yield O(this,Ce,"f")}async*encode(){for(let e of this.values())G(e)?yield*e.stream():yield e}[(J=new WeakMap,xe=new WeakMap,ot=new WeakMap,Te=new WeakMap,ee=new WeakMap,Ce=new WeakMap,Re=new WeakMap,at=new WeakMap,Ee=new WeakSet,sr=function(r,s){let n="";n+=`${O(this,Te,"f")}${this.boundary}${O(this,J,"f")}`,n+=`Content-Disposition: form-data; name="${rr(r)}"`,G(s)&&(n+=`; filename="${rr(s.name)}"${O(this,J,"f")}`,n+=`Content-Type: ${s.type||"application/octet-stream"}`);let i=G(s)?s.size:s.byteLength;return O(this,at,"f").enableAdditionalHeaders===!0&&i!=null&&!isNaN(i)&&(n+=`${O(this,J,"f")}Content-Length: ${G(s)?s.size:s.byteLength}`),O(this,ee,"f").encode(`${n}${O(this,J,"f").repeat(2)}`)},Un=function(){let r=0;for(let[s,n]of O(this,Re,"f")){let i=G(n)?n:O(this,ee,"f").encode(er(n)),o=G(i)?i.size:i.byteLength;if(o==null||isNaN(o))return;r+=O(this,Ee,"m",sr).call(this,s,i).byteLength,r+=o,r+=O(this,ot,"f")}return String(r+O(this,Ce,"f").byteLength)},Symbol.iterator)](){return this.values()}[Symbol.asyncIterator](){return this.encode()}};var jn=require("node:buffer"),Mn=require("node:util");function Ae(t){return l.nodeStream(t)&&l.function_(t.getBoundary)}async function nr(t,e){if(e&&"content-length"in e)return Number(e["content-length"]);if(!t)return 0;if(l.string(t))return jn.Buffer.byteLength(t);if(l.buffer(t))return t.length;if(Ae(t))return(0,Mn.promisify)(t.getLength.bind(t))()}function Se(t,e,r){let s={};for(let n of r){let i=(...o)=>{e.emit(n,...o)};s[n]=i,t.on(n,i)}return()=>{for(let[n,i]of Object.entries(s))t.off(n,i)}}var Fn=v(require("node:net"),1);function ir(){let t=[];return{once(e,r,s){e.once(r,s),t.push({origin:e,event:r,fn:s})},unhandleAll(){for(let e of t){let{origin:r,event:s,fn:n}=e;r.removeListener(s,n)}t.length=0}}}var Bn=Symbol("reentry"),sh=()=>{},Oe=class extends Error{constructor(e,r){super(`Timeout awaiting '${r}' for ${e}ms`),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.code="ETIMEDOUT"}};function or(t,e,r){if(Bn in t)return sh;t[Bn]=!0;let s=[],{once:n,unhandleAll:i}=ir(),o=(f,b,T)=>{var C;let R=setTimeout(b,f,f,T);(C=R.unref)==null||C.call(R);let E=()=>{clearTimeout(R)};return s.push(E),E},{host:a,hostname:c}=r,u=(f,b)=>{t.destroy(new Oe(f,b))},d=()=>{for(let f of s)f();i()};if(t.once("error",f=>{if(d(),t.listenerCount("error")===0)throw f}),typeof e.request<"u"){let f=o(e.request,u,"request");n(t,"response",b=>{n(b,"end",f)})}if(typeof e.socket<"u"){let{socket:f}=e,b=()=>{u(f,"socket")};t.setTimeout(f,b),s.push(()=>{t.removeListener("timeout",b)})}let g=typeof e.lookup<"u",_=typeof e.connect<"u",m=typeof e.secureConnect<"u",x=typeof e.send<"u";return(g||_||m||x)&&n(t,"socket",f=>{let{socketPath:b}=t;if(f.connecting){let T=Boolean(b??Fn.default.isIP(c??a??"")!==0);if(g&&!T&&typeof f.address().address>"u"){let R=o(e.lookup,u,"lookup");n(f,"lookup",R)}if(_){let R=()=>o(e.connect,u,"connect");T?n(f,"connect",R()):n(f,"lookup",E=>{E===null&&n(f,"connect",R())})}m&&r.protocol==="https:"&&n(f,"connect",()=>{let R=o(e.secureConnect,u,"secureConnect");n(f,"secureConnect",R)})}if(x){let T=()=>o(e.send,u,"send");f.connecting?n(f,"connect",()=>{n(t,"upload-complete",T())}):n(t,"upload-complete",T())}}),typeof e.response<"u"&&n(t,"upload-complete",()=>{let f=o(e.response,u,"response");n(t,"response",f)}),typeof e.read<"u"&&n(t,"response",f=>{let b=o(e.read,u,"read");n(f,"end",b)}),d}function ar(t){t=t;let e={protocol:t.protocol,hostname:l.string(t.hostname)&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,host:t.host,hash:t.hash,search:t.search,pathname:t.pathname,href:t.href,path:`${t.pathname||""}${t.search||""}`};return l.string(t.port)&&t.port.length>0&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username||""}:${t.password||""}`),e}var Ne=class{constructor(){Object.defineProperty(this,"weakMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"map",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.weakMap=new WeakMap,this.map=new Map}set(e,r){typeof e=="object"?this.weakMap.set(e,r):this.map.set(e,r)}get(e){return typeof e=="object"?this.weakMap.get(e):this.map.get(e)}has(e){return typeof e=="object"?this.weakMap.has(e):this.map.has(e)}};var nh=({attemptCount:t,retryOptions:e,error:r,retryAfter:s,computedValue:n})=>{if(r.name==="RetryError")return 1;if(t>e.limit)return 0;let i=e.methods.includes(r.options.method),o=e.errorCodes.includes(r.code),a=r.response&&e.statusCodes.includes(r.response.statusCode);if(!i||!o&&!a)return 0;if(r.response){if(s)return s>n?0:s;if(r.response.statusCode===413)return 0}let c=Math.random()*e.noise;return Math.min(2**(t-1)*1e3,e.backoffLimit)+c},$n=nh;var eo=v(require("node:process"),1),ve=require("node:util"),z=require("node:url"),to=require("node:tls"),ro=v(require("node:http"),1),so=v(require("node:https"),1);function ut(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e.toLowerCase(),r]))}var no=v(Kn(),1),io=v(Yi(),1);function kr(t){let e=[],r=t.split(",");for(let s of r){let[n,...i]=s.split(";"),o=n.trim();if(o[0]!=="<"||o[o.length-1]!==">")throw new Error(`Invalid format of the Link header reference: ${o}`);let a=o.slice(1,-1),c={};if(i.length===0)throw new Error(`Unexpected end of Link header parameters: ${i.join(";")}`);for(let u of i){let d=u.trim(),g=d.indexOf("=");if(g===-1)throw new Error(`Failed to parse Link header: ${t}`);let _=d.slice(0,g).trim(),m=d.slice(g+1).trim();c[_]=m}e.push({reference:a,parameters:c})}return e}var[Zi,vu]=eo.default.versions.node.split(".").map(Number);function Uu(t){for(let e in t){let r=t[e];p.any([l.string,l.number,l.boolean,l.null_,l.undefined],r)}}var ju=new Map,_t,Mu=()=>_t||(_t=new no.default,_t),Bu={request:void 0,agent:{http:void 0,https:void 0,http2:void 0},h2session:void 0,decompress:!0,timeout:{connect:void 0,lookup:void 0,read:void 0,request:void 0,response:void 0,secureConnect:void 0,send:void 0,socket:void 0},prefixUrl:"",body:void 0,form:void 0,json:void 0,cookieJar:void 0,ignoreInvalidCookies:!1,searchParams:void 0,dnsLookup:void 0,dnsCache:void 0,context:{},hooks:{init:[],beforeRequest:[],beforeError:[],beforeRedirect:[],beforeRetry:[],afterResponse:[]},followRedirect:!0,maxRedirects:10,cache:void 0,throwHttpErrors:!0,username:"",password:"",http2:!1,allowGetBody:!1,headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},methodRewriting:!1,dnsLookupIpVersion:void 0,parseJson:JSON.parse,stringifyJson:JSON.stringify,retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:t})=>t,backoffLimit:Number.POSITIVE_INFINITY,noise:100},localAddress:void 0,method:"GET",createConnection:void 0,cacheOptions:{shared:void 0,cacheHeuristic:void 0,immutableMinTimeToLive:void 0,ignoreCargoCult:void 0},https:{alpnProtocols:void 0,rejectUnauthorized:void 0,checkServerIdentity:void 0,certificateAuthority:void 0,key:void 0,certificate:void 0,passphrase:void 0,pfx:void 0,ciphers:void 0,honorCipherOrder:void 0,minVersion:void 0,maxVersion:void 0,signatureAlgorithms:void 0,tlsSessionLifetime:void 0,dhparam:void 0,ecdhCurve:void 0,certificateRevocationLists:void 0},encoding:void 0,resolveBodyOnly:!1,isStream:!1,responseType:"text",url:void 0,pagination:{transform(t){return t.request.options.responseType==="json"?t.body:JSON.parse(t.body)},paginate({response:t}){let e=t.headers.link;if(typeof e!="string"||e.trim()==="")return!1;let s=kr(e).find(n=>n.parameters.rel==="next"||n.parameters.rel==='"next"');return s?{url:new z.URL(s.reference,t.url)}:!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:Number.POSITIVE_INFINITY,backoff:0,requestLimit:1e4,stackAllItems:!1},setHost:!0,maxHeaderSize:void 0,signal:void 0,enableUnixSockets:!0},Fu=t=>{let{hooks:e,retry:r}=t,s={...t,context:{...t.context},cacheOptions:{...t.cacheOptions},https:{...t.https},agent:{...t.agent},headers:{...t.headers},retry:{...r,errorCodes:[...r.errorCodes],methods:[...r.methods],statusCodes:[...r.statusCodes]},timeout:{...t.timeout},hooks:{init:[...e.init],beforeRequest:[...e.beforeRequest],beforeError:[...e.beforeError],beforeRedirect:[...e.beforeRedirect],beforeRetry:[...e.beforeRetry],afterResponse:[...e.afterResponse]},searchParams:t.searchParams?new z.URLSearchParams(t.searchParams):void 0,pagination:{...t.pagination}};return s.url!==void 0&&(s.prefixUrl=""),s},$u=t=>{let{hooks:e,retry:r}=t,s={...t};return l.object(t.context)&&(s.context={...t.context}),l.object(t.cacheOptions)&&(s.cacheOptions={...t.cacheOptions}),l.object(t.https)&&(s.https={...t.https}),l.object(t.cacheOptions)&&(s.cacheOptions={...s.cacheOptions}),l.object(t.agent)&&(s.agent={...t.agent}),l.object(t.headers)&&(s.headers={...t.headers}),l.object(r)&&(s.retry={...r},l.array(r.errorCodes)&&(s.retry.errorCodes=[...r.errorCodes]),l.array(r.methods)&&(s.retry.methods=[...r.methods]),l.array(r.statusCodes)&&(s.retry.statusCodes=[...r.statusCodes])),l.object(t.timeout)&&(s.timeout={...t.timeout}),l.object(e)&&(s.hooks={...e},l.array(e.init)&&(s.hooks.init=[...e.init]),l.array(e.beforeRequest)&&(s.hooks.beforeRequest=[...e.beforeRequest]),l.array(e.beforeError)&&(s.hooks.beforeError=[...e.beforeError]),l.array(e.beforeRedirect)&&(s.hooks.beforeRedirect=[...e.beforeRedirect]),l.array(e.beforeRetry)&&(s.hooks.beforeRetry=[...e.beforeRetry]),l.array(e.afterResponse)&&(s.hooks.afterResponse=[...e.afterResponse])),l.object(t.pagination)&&(s.pagination={...t.pagination}),s},zu=t=>{let e=[t.timeout.socket,t.timeout.connect,t.timeout.lookup,t.timeout.request,t.timeout.secureConnect].filter(r=>typeof r=="number");if(e.length>0)return Math.min(...e)},Xi=(t,e,r)=>{var n;let s=(n=t.hooks)==null?void 0:n.init;if(s)for(let i of s)i(e,r)},L=class{constructor(e,r,s){if(Object.defineProperty(this,"_unixOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_internals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_merging",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_init",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),p.any([l.string,l.urlInstance,l.object,l.undefined],e),p.any([l.object,l.undefined],r),p.any([l.object,l.undefined],s),e instanceof L||r instanceof L)throw new TypeError("The defaults must be passed as the third argument");this._internals=Fu((s==null?void 0:s._internals)??s??Bu),this._init=[...(s==null?void 0:s._init)??[]],this._merging=!1,this._unixOptions=void 0;try{if(l.plainObject(e))try{this.merge(e),this.merge(r)}finally{this.url=e.url}else try{this.merge(r)}finally{if((r==null?void 0:r.url)!==void 0)if(e===void 0)this.url=r.url;else throw new TypeError("The `url` option is mutually exclusive with the `input` argument");else e!==void 0&&(this.url=e)}}catch(n){throw n.options=this,n}}merge(e){if(!!e){if(e instanceof L){for(let r of e._init)this.merge(r);return}e=$u(e),Xi(this,e,this),Xi(e,e,this),this._merging=!0,"isStream"in e&&(this.isStream=e.isStream);try{let r=!1;for(let s in e)if(!(s==="mutableDefaults"||s==="handlers")&&s!=="url"){if(!(s in this))throw new Error(`Unexpected option: ${s}`);this[s]=e[s],r=!0}r&&this._init.push(e)}finally{this._merging=!1}}}get request(){return this._internals.request}set request(e){p.any([l.function_,l.undefined],e),this._internals.request=e}get agent(){return this._internals.agent}set agent(e){p.plainObject(e);for(let r in e){if(!(r in this._internals.agent))throw new TypeError(`Unexpected agent option: ${r}`);p.any([l.object,l.undefined],e[r])}this._merging?Object.assign(this._internals.agent,e):this._internals.agent={...e}}get h2session(){return this._internals.h2session}set h2session(e){this._internals.h2session=e}get decompress(){return this._internals.decompress}set decompress(e){p.boolean(e),this._internals.decompress=e}get timeout(){return this._internals.timeout}set timeout(e){p.plainObject(e);for(let r in e){if(!(r in this._internals.timeout))throw new Error(`Unexpected timeout option: ${r}`);p.any([l.number,l.undefined],e[r])}this._merging?Object.assign(this._internals.timeout,e):this._internals.timeout={...e}}get prefixUrl(){return this._internals.prefixUrl}set prefixUrl(e){if(p.any([l.string,l.urlInstance],e),e===""){this._internals.prefixUrl="";return}if(e=e.toString(),e.endsWith("/")||(e+="/"),this._internals.prefixUrl&&this._internals.url){let{href:r}=this._internals.url;this._internals.url.href=e+r.slice(this._internals.prefixUrl.length)}this._internals.prefixUrl=e}get body(){return this._internals.body}set body(e){p.any([l.string,l.buffer,l.nodeStream,l.generator,l.asyncGenerator,ce,l.undefined],e),l.nodeStream(e)&&p.truthy(e.readable),e!==void 0&&(p.undefined(this._internals.form),p.undefined(this._internals.json)),this._internals.body=e}get form(){return this._internals.form}set form(e){p.any([l.plainObject,l.undefined],e),e!==void 0&&(p.undefined(this._internals.body),p.undefined(this._internals.json)),this._internals.form=e}get json(){return this._internals.json}set json(e){e!==void 0&&(p.undefined(this._internals.body),p.undefined(this._internals.form)),this._internals.json=e}get url(){return this._internals.url}set url(e){if(p.any([l.string,l.urlInstance,l.undefined],e),e===void 0){this._internals.url=void 0;return}if(l.string(e)&&e.startsWith("/"))throw new Error("`url` must not start with a slash");let r=`${this.prefixUrl}${e.toString()}`,s=new z.URL(r);if(this._internals.url=s,decodeURI(r),s.protocol==="unix:"&&(s.href=`http://unix${s.pathname}${s.search}`),s.protocol!=="http:"&&s.protocol!=="https:"){let n=new Error(`Unsupported protocol: ${s.protocol}`);throw n.code="ERR_UNSUPPORTED_PROTOCOL",n}if(this._internals.username&&(s.username=this._internals.username,this._internals.username=""),this._internals.password&&(s.password=this._internals.password,this._internals.password=""),this._internals.searchParams&&(s.search=this._internals.searchParams.toString(),this._internals.searchParams=void 0),s.hostname==="unix"){if(!this._internals.enableUnixSockets)throw new Error("Using UNIX domain sockets but option `enableUnixSockets` is not enabled");let n=/(?<socketPath>.+?):(?<path>.+)/.exec(`${s.pathname}${s.search}`);if(n!=null&&n.groups){let{socketPath:i,path:o}=n.groups;this._unixOptions={socketPath:i,path:o,host:""}}else this._unixOptions=void 0;return}this._unixOptions=void 0}get cookieJar(){return this._internals.cookieJar}set cookieJar(e){if(p.any([l.object,l.undefined],e),e===void 0){this._internals.cookieJar=void 0;return}let{setCookie:r,getCookieString:s}=e;p.function_(r),p.function_(s),r.length===4&&s.length===0?(r=(0,ve.promisify)(r.bind(e)),s=(0,ve.promisify)(s.bind(e)),this._internals.cookieJar={setCookie:r,getCookieString:s}):this._internals.cookieJar=e}get signal(){return this._internals.signal}set signal(e){p.object(e),this._internals.signal=e}get ignoreInvalidCookies(){return this._internals.ignoreInvalidCookies}set ignoreInvalidCookies(e){p.boolean(e),this._internals.ignoreInvalidCookies=e}get searchParams(){return this._internals.url?this._internals.url.searchParams:(this._internals.searchParams===void 0&&(this._internals.searchParams=new z.URLSearchParams),this._internals.searchParams)}set searchParams(e){p.any([l.string,l.object,l.undefined],e);let r=this._internals.url;if(e===void 0){this._internals.searchParams=void 0,r&&(r.search="");return}let s=this.searchParams,n;if(l.string(e))n=new z.URLSearchParams(e);else if(e instanceof z.URLSearchParams)n=e;else{Uu(e),n=new z.URLSearchParams;for(let i in e){let o=e[i];o===null?n.append(i,""):o===void 0?s.delete(i):n.append(i,o)}}if(this._merging){for(let i of n.keys())s.delete(i);for(let[i,o]of n)s.append(i,o)}else r?r.search=s.toString():this._internals.searchParams=s}get searchParameters(){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}set searchParameters(e){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}get dnsLookup(){return this._internals.dnsLookup}set dnsLookup(e){p.any([l.function_,l.undefined],e),this._internals.dnsLookup=e}get dnsCache(){return this._internals.dnsCache}set dnsCache(e){p.any([l.object,l.boolean,l.undefined],e),e===!0?this._internals.dnsCache=Mu():e===!1?this._internals.dnsCache=void 0:this._internals.dnsCache=e}get context(){return this._internals.context}set context(e){p.object(e),this._merging?Object.assign(this._internals.context,e):this._internals.context={...e}}get hooks(){return this._internals.hooks}set hooks(e){p.object(e);for(let r in e){if(!(r in this._internals.hooks))throw new Error(`Unexpected hook event: ${r}`);let s=r,i=e[s];if(p.any([l.array,l.undefined],i),i)for(let o of i)p.function_(o);if(this._merging)i&&this._internals.hooks[s].push(...i);else{if(!i)throw new Error(`Missing hook event: ${r}`);this._internals.hooks[r]=[...i]}}}get followRedirect(){return this._internals.followRedirect}set followRedirect(e){p.boolean(e),this._internals.followRedirect=e}get followRedirects(){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}set followRedirects(e){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}get maxRedirects(){return this._internals.maxRedirects}set maxRedirects(e){p.number(e),this._internals.maxRedirects=e}get cache(){return this._internals.cache}set cache(e){p.any([l.object,l.string,l.boolean,l.undefined],e),e===!0?this._internals.cache=ju:e===!1?this._internals.cache=void 0:this._internals.cache=e}get throwHttpErrors(){return this._internals.throwHttpErrors}set throwHttpErrors(e){p.boolean(e),this._internals.throwHttpErrors=e}get username(){let e=this._internals.url,r=e?e.username:this._internals.username;return decodeURIComponent(r)}set username(e){p.string(e);let r=this._internals.url,s=encodeURIComponent(e);r?r.username=s:this._internals.username=s}get password(){let e=this._internals.url,r=e?e.password:this._internals.password;return decodeURIComponent(r)}set password(e){p.string(e);let r=this._internals.url,s=encodeURIComponent(e);r?r.password=s:this._internals.password=s}get http2(){return this._internals.http2}set http2(e){p.boolean(e),this._internals.http2=e}get allowGetBody(){return this._internals.allowGetBody}set allowGetBody(e){p.boolean(e),this._internals.allowGetBody=e}get headers(){return this._internals.headers}set headers(e){p.plainObject(e),this._merging?Object.assign(this._internals.headers,ut(e)):this._internals.headers=ut(e)}get methodRewriting(){return this._internals.methodRewriting}set methodRewriting(e){p.boolean(e),this._internals.methodRewriting=e}get dnsLookupIpVersion(){return this._internals.dnsLookupIpVersion}set dnsLookupIpVersion(e){if(e!==void 0&&e!==4&&e!==6)throw new TypeError(`Invalid DNS lookup IP version: ${e}`);this._internals.dnsLookupIpVersion=e}get parseJson(){return this._internals.parseJson}set parseJson(e){p.function_(e),this._internals.parseJson=e}get stringifyJson(){return this._internals.stringifyJson}set stringifyJson(e){p.function_(e),this._internals.stringifyJson=e}get retry(){return this._internals.retry}set retry(e){if(p.plainObject(e),p.any([l.function_,l.undefined],e.calculateDelay),p.any([l.number,l.undefined],e.maxRetryAfter),p.any([l.number,l.undefined],e.limit),p.any([l.array,l.undefined],e.methods),p.any([l.array,l.undefined],e.statusCodes),p.any([l.array,l.undefined],e.errorCodes),p.any([l.number,l.undefined],e.noise),e.noise&&Math.abs(e.noise)>100)throw new Error(`The maximum acceptable retry noise is +/- 100ms, got ${e.noise}`);for(let s in e)if(!(s in this._internals.retry))throw new Error(`Unexpected retry option: ${s}`);this._merging?Object.assign(this._internals.retry,e):this._internals.retry={...e};let{retry:r}=this._internals;r.methods=[...new Set(r.methods.map(s=>s.toUpperCase()))],r.statusCodes=[...new Set(r.statusCodes)],r.errorCodes=[...new Set(r.errorCodes)]}get localAddress(){return this._internals.localAddress}set localAddress(e){p.any([l.string,l.undefined],e),this._internals.localAddress=e}get method(){return this._internals.method}set method(e){p.string(e),this._internals.method=e.toUpperCase()}get createConnection(){return this._internals.createConnection}set createConnection(e){p.any([l.function_,l.undefined],e),this._internals.createConnection=e}get cacheOptions(){return this._internals.cacheOptions}set cacheOptions(e){p.plainObject(e),p.any([l.boolean,l.undefined],e.shared),p.any([l.number,l.undefined],e.cacheHeuristic),p.any([l.number,l.undefined],e.immutableMinTimeToLive),p.any([l.boolean,l.undefined],e.ignoreCargoCult);for(let r in e)if(!(r in this._internals.cacheOptions))throw new Error(`Cache option \`${r}\` does not exist`);this._merging?Object.assign(this._internals.cacheOptions,e):this._internals.cacheOptions={...e}}get https(){return this._internals.https}set https(e){p.plainObject(e),p.any([l.boolean,l.undefined],e.rejectUnauthorized),p.any([l.function_,l.undefined],e.checkServerIdentity),p.any([l.string,l.object,l.array,l.undefined],e.certificateAuthority),p.any([l.string,l.object,l.array,l.undefined],e.key),p.any([l.string,l.object,l.array,l.undefined],e.certificate),p.any([l.string,l.undefined],e.passphrase),p.any([l.string,l.buffer,l.array,l.undefined],e.pfx),p.any([l.array,l.undefined],e.alpnProtocols),p.any([l.string,l.undefined],e.ciphers),p.any([l.string,l.buffer,l.undefined],e.dhparam),p.any([l.string,l.undefined],e.signatureAlgorithms),p.any([l.string,l.undefined],e.minVersion),p.any([l.string,l.undefined],e.maxVersion),p.any([l.boolean,l.undefined],e.honorCipherOrder),p.any([l.number,l.undefined],e.tlsSessionLifetime),p.any([l.string,l.undefined],e.ecdhCurve),p.any([l.string,l.buffer,l.array,l.undefined],e.certificateRevocationLists);for(let r in e)if(!(r in this._internals.https))throw new Error(`HTTPS option \`${r}\` does not exist`);this._merging?Object.assign(this._internals.https,e):this._internals.https={...e}}get encoding(){return this._internals.encoding}set encoding(e){if(e===null)throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");p.any([l.string,l.undefined],e),this._internals.encoding=e}get resolveBodyOnly(){return this._internals.resolveBodyOnly}set resolveBodyOnly(e){p.boolean(e),this._internals.resolveBodyOnly=e}get isStream(){return this._internals.isStream}set isStream(e){p.boolean(e),this._internals.isStream=e}get responseType(){return this._internals.responseType}set responseType(e){if(e===void 0){this._internals.responseType="text";return}if(e!=="text"&&e!=="buffer"&&e!=="json")throw new Error(`Invalid \`responseType\` option: ${e}`);this._internals.responseType=e}get pagination(){return this._internals.pagination}set pagination(e){p.object(e),this._merging?Object.assign(this._internals.pagination,e):this._internals.pagination=e}get auth(){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}set auth(e){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}get setHost(){return this._internals.setHost}set setHost(e){p.boolean(e),this._internals.setHost=e}get maxHeaderSize(){return this._internals.maxHeaderSize}set maxHeaderSize(e){p.any([l.number,l.undefined],e),this._internals.maxHeaderSize=e}get enableUnixSockets(){return this._internals.enableUnixSockets}set enableUnixSockets(e){p.boolean(e),this._internals.enableUnixSockets=e}toJSON(){return{...this._internals}}[Symbol.for("nodejs.util.inspect.custom")](e,r){return(0,ve.inspect)(this._internals,r)}createNativeRequestOptions(){var o;let e=this._internals,r=e.url,s;r.protocol==="https:"?s=e.http2?e.agent:e.agent.https:s=e.agent.http;let{https:n}=e,{pfx:i}=n;return l.array(i)&&l.plainObject(i[0])&&(i=i.map(a=>({buf:a.buffer,passphrase:a.passphrase}))),{...e.cacheOptions,...this._unixOptions,ALPNProtocols:n.alpnProtocols,ca:n.certificateAuthority,cert:n.certificate,key:n.key,passphrase:n.passphrase,pfx:n.pfx,rejectUnauthorized:n.rejectUnauthorized,checkServerIdentity:n.checkServerIdentity??to.checkServerIdentity,ciphers:n.ciphers,honorCipherOrder:n.honorCipherOrder,minVersion:n.minVersion,maxVersion:n.maxVersion,sigalgs:n.signatureAlgorithms,sessionTimeout:n.tlsSessionLifetime,dhparam:n.dhparam,ecdhCurve:n.ecdhCurve,crl:n.certificateRevocationLists,lookup:e.dnsLookup??((o=e.dnsCache)==null?void 0:o.lookup),family:e.dnsLookupIpVersion,agent:s,setHost:e.setHost,method:e.method,maxHeaderSize:e.maxHeaderSize,localAddress:e.localAddress,headers:e.headers,createConnection:e.createConnection,timeout:e.http2?zu(e):void 0,h2session:e.h2session}}getRequestFunction(){let e=this._internals.url,{request:r}=this._internals;return!r&&e?this.getFallbackRequestFunction():r}getFallbackRequestFunction(){let e=this._internals.url;if(!!e){if(e.protocol==="https:"){if(this._internals.http2){if(Zi<15||Zi===15&&vu<10){let r=new Error("To use the `http2` option, install Node.js 15.10.0 or above");throw r.code="EUNSUPPORTED",r}return io.default.auto}return so.default.request}return ro.default.request}}freeze(){let e=this._internals;Object.freeze(e),Object.freeze(e.hooks),Object.freeze(e.hooks.afterResponse),Object.freeze(e.hooks.beforeError),Object.freeze(e.hooks.beforeRedirect),Object.freeze(e.hooks.beforeRequest),Object.freeze(e.hooks.beforeRetry),Object.freeze(e.hooks.init),Object.freeze(e.https),Object.freeze(e.cacheOptions),Object.freeze(e.agent),Object.freeze(e.headers),Object.freeze(e.timeout),Object.freeze(e.retry),Object.freeze(e.retry.errorCodes),Object.freeze(e.retry.methods),Object.freeze(e.retry.statusCodes),Object.freeze(e.context)}};var le=t=>{let{statusCode:e}=t,r=t.request.options.followRedirect?299:399;return e>=200&&e<=r||e===304},wt=class extends N{constructor(e,r){let{options:s}=r.request;super(`${e.message} in "${s.url.toString()}"`,e,r.request),this.name="ParseError",this.code="ERR_BODY_PARSE_FAILURE"}},qr=(t,e,r,s)=>{let{rawBody:n}=t;try{if(e==="text")return n.toString(s);if(e==="json")return n.length===0?"":r(n.toString(s));if(e==="buffer")return n}catch(i){throw new wt(i,t)}throw new wt({message:`Unknown body type '${e}'`,name:"Error"},t)};function Du(t){return t.writable&&!t.writableEnded}var oo=Du;function Et(t){return t.protocol==="unix:"||t.hostname==="unix"}var Vu=l.string(Mr.default.versions.brotli),Wu=new Set(["GET","HEAD"]),vr=new Ne,Gu=new Set([300,301,302,303,304,307,308]),Ju=["socket","connect","continue","information","upgrade"],Ur=()=>{},D=class extends ao.Duplex{constructor(e,r,s){var i,o;super({autoDestroy:!1,highWaterMark:0}),Object.defineProperty(this,"constructor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_noPipe",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"requestUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"redirectUrls",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retryCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopRetry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downloadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_uploadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopReading",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pipedServerResponses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_responseSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bodySize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_unproxyEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isFromCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cannotHaveBody",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_triggerRead",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cancelTimeouts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_nativeResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_flushed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_aborted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_requestInitialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._downloadedSize=0,this._uploadedSize=0,this._stopReading=!1,this._pipedServerResponses=new Set,this._cannotHaveBody=!1,this._unproxyEvents=Ur,this._triggerRead=!1,this._cancelTimeouts=Ur,this._jobs=[],this._flushed=!1,this._requestInitialized=!1,this._aborted=!1,this.redirectUrls=[],this.retryCount=0,this._stopRetry=Ur,this.on("pipe",a=>{a.headers&&Object.assign(this.options.headers,a.headers)}),this.on("newListener",a=>{if(a==="retry"&&this.listenerCount("retry")>0)throw new Error("A retry listener has been attached already.")});try{if(this.options=new L(e,r,s),!this.options.url){if(this.options.prefixUrl==="")throw new TypeError("Missing `url` property");this.options.url=""}this.requestUrl=this.options.url}catch(a){let{options:c}=a;c&&(this.options=c),this.flush=async()=>{this.flush=async()=>{},this.destroy(a)};return}(i=this.options.signal)!=null&&i.aborted&&this.destroy(new ye(this)),(o=this.options.signal)==null||o.addEventListener("abort",()=>{this.destroy(new ye(this))});let{body:n}=this.options;l.nodeStream(n)&&n.once("error",a=>{this._flushed?this._beforeError(new me(a,this)):this.flush=async()=>{this.flush=async()=>{},this._beforeError(new me(a,this))}})}async flush(){var e;if(!this._flushed){this._flushed=!0;try{if(await this._finalizeBody(),this.destroyed)return;if(await this._makeRequest(),this.destroyed){(e=this._request)==null||e.destroy();return}for(let r of this._jobs)r();this._jobs.length=0,this._requestInitialized=!0}catch(r){this._beforeError(r)}}}_beforeError(e){if(this._stopReading)return;let{response:r,options:s}=this,n=this.retryCount+(e.name==="RetryError"?0:1);this._stopReading=!0,e instanceof N||(e=new N(e.message,e,this));let i=e;(async()=>{var o,a;if((r==null?void 0:r.readable)&&!r.rawBody&&!((a=(o=this._request)==null?void 0:o.socket)!=null&&a.destroyed)&&(r.setEncoding(this.readableEncoding),await this._setRawBody(r)&&(r.body=r.rawBody.toString())),this.listenerCount("retry")!==0){let c;try{let u;r&&"retry-after"in r.headers&&(u=Number(r.headers["retry-after"]),Number.isNaN(u)?(u=Date.parse(r.headers["retry-after"])-Date.now(),u<=0&&(u=1)):u*=1e3);let d=s.retry;c=await d.calculateDelay({attemptCount:n,retryOptions:d,error:i,retryAfter:u,computedValue:$n({attemptCount:n,retryOptions:d,error:i,retryAfter:u,computedValue:d.maxRetryAfter??s.timeout.request??Number.POSITIVE_INFINITY})})}catch(u){this._error(new N(u.message,u,this));return}if(c){if(await new Promise(u=>{let d=setTimeout(u,c);this._stopRetry=()=>{clearTimeout(d),u()}}),this.destroyed)return;try{for(let u of this.options.hooks.beforeRetry)await u(i,this.retryCount+1)}catch(u){this._error(new N(u.message,e,this));return}if(this.destroyed)return;this.destroy(),this.emit("retry",this.retryCount+1,e,u=>{let d=new D(s.url,u,s);return d.retryCount=this.retryCount+1,Mr.default.nextTick(()=>{d.flush()}),d});return}}this._error(i)})()}_read(){this._triggerRead=!0;let{response:e}=this;if(e&&!this._stopReading){e.readableLength&&(this._triggerRead=!1);let r;for(;(r=e.read())!==null;){this._downloadedSize+=r.length;let s=this.downloadProgress;s.percent<1&&this.emit("downloadProgress",s),this.push(r)}}}_write(e,r,s){let n=()=>{this._writeRequest(e,r,s)};this._requestInitialized?n():this._jobs.push(n)}_final(e){let r=()=>{if(!this._request||this._request.destroyed){e();return}this._request.end(s=>{var n;(n=this._request._writableState)!=null&&n.errored||(s||(this._bodySize=this._uploadedSize,this.emit("uploadProgress",this.uploadProgress),this._request.emit("upload-complete")),e(s))})};this._requestInitialized?r():this._jobs.push(r)}_destroy(e,r){if(this._stopReading=!0,this.flush=async()=>{},this._stopRetry(),this._cancelTimeouts(),this.options){let{body:s}=this.options;l.nodeStream(s)&&s.destroy()}this._request&&this._request.destroy(),e!==null&&!l.undefined(e)&&!(e instanceof N)&&(e=new N(e.message,e,this)),r(e)}pipe(e,r){return e instanceof Ue.ServerResponse&&this._pipedServerResponses.add(e),super.pipe(e,r)}unpipe(e){return e instanceof Ue.ServerResponse&&this._pipedServerResponses.delete(e),super.unpipe(e),this}async _finalizeBody(){let{options:e}=this,{headers:r}=e,s=!l.undefined(e.form),n=!l.undefined(e.json),i=!l.undefined(e.body),o=Wu.has(e.method)&&!(e.method==="GET"&&e.allowGetBody);if(this._cannotHaveBody=o,s||n||i){if(o)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);let a=!l.string(r["content-type"]);if(i){if(ce(e.body)){let u=new ht(e.body);a&&(r["content-type"]=u.headers["Content-Type"]),r["content-length"]=u.headers["Content-Length"],e.body=u.encode()}Ae(e.body)&&a&&(r["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`)}else if(s){a&&(r["content-type"]="application/x-www-form-urlencoded");let{form:u}=e;e.form=void 0,e.body=new Tt.URLSearchParams(u).toString()}else{a&&(r["content-type"]="application/json");let{json:u}=e;e.json=void 0,e.body=e.stringifyJson(u)}let c=await nr(e.body,e.headers);l.undefined(r["content-length"])&&l.undefined(r["transfer-encoding"])&&!o&&!l.undefined(c)&&(r["content-length"]=String(c))}e.responseType==="json"&&!("accept"in e.headers)&&(e.headers.accept="application/json"),this._bodySize=Number(r["content-length"])||void 0}async _onResponseBase(e){if(this.isAborted)return;let{options:r}=this,{url:s}=r;this._nativeResponse=e,r.decompress&&(e=(0,co.default)(e));let n=e.statusCode,i=e;i.statusMessage=i.statusMessage?i.statusMessage:Ue.default.STATUS_CODES[n],i.url=r.url.toString(),i.requestUrl=this.requestUrl,i.redirectUrls=this.redirectUrls,i.request=this,i.isFromCache=this._nativeResponse.fromCache??!1,i.ip=this.ip,i.retryCount=this.retryCount,i.ok=le(i),this._isFromCache=i.isFromCache,this._responseSize=Number(e.headers["content-length"])||void 0,this.response=i,e.once("end",()=>{this._responseSize=this._downloadedSize,this.emit("downloadProgress",this.downloadProgress)}),e.once("error",a=>{this._aborted=!0,e.destroy(),this._beforeError(new ge(a,this))}),e.once("aborted",()=>{this._aborted=!0,this._beforeError(new ge({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);let o=e.headers["set-cookie"];if(l.object(r.cookieJar)&&o){let a=o.map(async c=>r.cookieJar.setCookie(c,s.toString()));r.ignoreInvalidCookies&&(a=a.map(async c=>{try{await c}catch{}}));try{await Promise.all(a)}catch(c){this._beforeError(c);return}}if(!this.isAborted){if(r.followRedirect&&e.headers.location&&Gu.has(n)){if(e.resume(),this._cancelTimeouts(),this._unproxyEvents(),this.redirectUrls.length>=r.maxRedirects){this._beforeError(new Je(this));return}this._request=void 0;let a=new L(void 0,void 0,this.options);(n===303&&a.method!=="GET"&&a.method!=="HEAD"||a.methodRewriting)&&(a.method="GET",a.body=void 0,a.json=void 0,a.form=void 0,delete a.headers["content-length"]);try{let u=xt.Buffer.from(e.headers.location,"binary").toString(),d=new Tt.URL(u,s);if(!Et(s)&&Et(d)){this._beforeError(new N("Cannot redirect to UNIX socket",{},this));return}d.hostname!==s.hostname||d.port!==s.port?("host"in a.headers&&delete a.headers.host,"cookie"in a.headers&&delete a.headers.cookie,"authorization"in a.headers&&delete a.headers.authorization,(a.username||a.password)&&(a.username="",a.password="")):(d.username=a.username,d.password=a.password),this.redirectUrls.push(d),a.prefixUrl="",a.url=d;for(let g of a.hooks.beforeRedirect)await g(a,i);this.emit("redirect",a,i),this.options=a,await this._makeRequest()}catch(u){this._beforeError(u);return}return}if(r.isStream&&r.throwHttpErrors&&!le(i)){this._beforeError(new Z(i));return}if(e.on("readable",()=>{this._triggerRead&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),e.once("end",()=>{this.push(null)}),this._noPipe){await this._setRawBody()&&this.emit("response",e);return}this.emit("response",e);for(let a of this._pipedServerResponses)if(!a.headersSent){for(let c in e.headers){let u=r.decompress?c!=="content-encoding":!0,d=e.headers[c];u&&a.setHeader(c,d)}a.statusCode=n}}}async _setRawBody(e=this){if(e.readableEnded)return!1;try{let r=await(0,ho.buffer)(e);if(!this.isAborted)return this.response.rawBody=r,!0}catch{}return!1}async _onResponse(e){try{await this._onResponseBase(e)}catch(r){this._beforeError(r)}}_onRequest(e){let{options:r}=this,{timeout:s,url:n}=r;js(e),this.options.http2&&e.setTimeout(0),this._cancelTimeouts=or(e,s,n);let i=r.cache?"cacheableResponse":"response";e.once(i,o=>{this._onResponse(o)}),e.once("error",o=>{this._aborted=!0,e.destroy(),o=o instanceof Oe?new Qe(o,this.timings,this):new N(o.message,o,this),this._beforeError(o)}),this._unproxyEvents=Se(e,this,Ju),this._request=e,this.emit("uploadProgress",this.uploadProgress),this._sendBody(),this.emit("request",e)}async _asyncWrite(e){return new Promise((r,s)=>{super.write(e,n=>{if(n){s(n);return}r()})})}_sendBody(){let{body:e}=this.options,r=this.redirectUrls.length===0?this:this._request??this;l.nodeStream(e)?e.pipe(r):l.generator(e)||l.asyncGenerator(e)?(async()=>{try{for await(let s of e)await this._asyncWrite(s);super.end()}catch(s){this._beforeError(s)}})():l.undefined(e)?(this._cannotHaveBody||this._noPipe)&&r.end():(this._writeRequest(e,void 0,()=>{}),r.end())}_prepareCache(e){vr.has(e)||vr.set(e,new jr.default((r,s)=>{let n=r._request(r,s);return l.promise(n)&&(n.once=(i,o)=>{if(i==="error")(async()=>{try{await n}catch(a){o(a)}})();else if(i==="abort")(async()=>{try{(await n).once("abort",o)}catch{}})();else throw new Error(`Unknown HTTP2 promise event: ${i}`);return n}),n},e))}async _createCacheableRequest(e,r){return new Promise((s,n)=>{Object.assign(r,ar(e));let i,o=vr.get(r.cache)(r,async a=>{if(a._readableState.autoDestroy=!1,i){let c=()=>{a.req&&(a.complete=a.req.res.complete)};a.prependOnceListener("end",c),c(),(await i).emit("cacheableResponse",a)}s(a)});o.once("error",n),o.once("request",async a=>{i=a,s(i)})})}async _makeRequest(){let{options:e}=this,{headers:r,username:s,password:n}=e,i=e.cookieJar;for(let u in r)if(l.undefined(r[u]))delete r[u];else if(l.null_(r[u]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${u}\` header`);if(e.decompress&&l.undefined(r["accept-encoding"])&&(r["accept-encoding"]=Vu?"gzip, deflate, br":"gzip, deflate"),s||n){let u=xt.Buffer.from(`${s}:${n}`).toString("base64");r.authorization=`Basic ${u}`}if(i){let u=await i.getCookieString(e.url.toString());l.nonEmptyString(u)&&(r.cookie=u)}e.prefixUrl="";let o;for(let u of e.hooks.beforeRequest){let d=await u(e);if(!l.undefined(d)){o=()=>d;break}}o||(o=e.getRequestFunction());let a=e.url;this._requestOptions=e.createNativeRequestOptions(),e.cache&&(this._requestOptions._request=o,this._requestOptions.cache=e.cache,this._prepareCache(e.cache));let c=e.cache?this._createCacheableRequest:o;try{let u=c(a,this._requestOptions);l.promise(u)&&(u=await u),l.undefined(u)&&(u=e.getFallbackRequestFunction()(a,this._requestOptions),l.promise(u)&&(u=await u)),oo(u)?this._onRequest(u):this.writable?(this.once("finish",()=>{this._onResponse(u)}),this._sendBody()):this._onResponse(u)}catch(u){throw u instanceof jr.default.CacheError?new Ke(u,this):u}}async _error(e){try{for(let r of this.options.hooks.beforeError)e=await r(e)}catch(r){e=new N(r.message,r,this)}this.destroy(e)}_writeRequest(e,r,s){!this._request||this._request.destroyed||this._request.write(e,r,n=>{if(!n){this._uploadedSize+=xt.Buffer.byteLength(e,r);let i=this.uploadProgress;i.percent<1&&this.emit("uploadProgress",i)}s(n)})}get ip(){var e;return(e=this.socket)==null?void 0:e.remoteAddress}get isAborted(){return this._aborted}get socket(){var e;return((e=this._request)==null?void 0:e.socket)??void 0}get downloadProgress(){let e;return this._responseSize?e=this._downloadedSize/this._responseSize:this._responseSize===this._downloadedSize?e=1:e=0,{percent:e,transferred:this._downloadedSize,total:this._responseSize}}get uploadProgress(){let e;return this._bodySize?e=this._uploadedSize/this._bodySize:this._bodySize===this._uploadedSize?e=1:e=0,{percent:e,transferred:this._uploadedSize,total:this._bodySize}}get timings(){var e;return(e=this._request)==null?void 0:e.timings}get isFromCache(){return this._isFromCache}get reusedSocket(){var e;return(e=this._request)==null?void 0:e.reusedSocket}};var Ct=class extends N{constructor(e){super("Promise was canceled",{},e),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}};var Ku=["request","response","redirect","uploadProgress","downloadProgress"];function Rt(t){let e,r,s,n=new uo.EventEmitter,i=new W((a,c,u)=>{u(()=>{e.destroy()}),u.shouldReject=!1,u(()=>{c(new Ct(e))});let d=g=>{var f;u(()=>{});let _=t??new D(void 0,void 0,s);_.retryCount=g,_._noPipe=!0,e=_,_.once("response",async b=>{let T=(b.headers["content-encoding"]??"").toLowerCase(),R=T==="gzip"||T==="deflate"||T==="br",{options:E}=_;if(R&&!E.decompress)b.body=b.rawBody;else try{b.body=qr(b,E.responseType,E.parseJson,E.encoding)}catch(C){if(b.body=b.rawBody.toString(),le(b)){_._beforeError(C);return}}try{let C=E.hooks.afterResponse;for(let[H,B]of C.entries())if(b=await B(b,async ne=>{throw E.merge(ne),E.prefixUrl="",ne.url&&(E.url=ne.url),E.hooks.afterResponse=E.hooks.afterResponse.slice(0,H),new Ye(_)}),!(l.object(b)&&l.number(b.statusCode)&&!l.nullOrUndefined(b.body)))throw new TypeError("The `afterResponse` hook returned an invalid value")}catch(C){_._beforeError(C);return}if(r=b,!le(b)){_._beforeError(new Z(b));return}_.destroy(),a(_.options.resolveBodyOnly?b.body:b)});let m=b=>{if(i.isCanceled)return;let{options:T}=_;if(b instanceof Z&&!T.throwHttpErrors){let{response:R}=b;_.destroy(),a(_.options.resolveBodyOnly?R.body:R);return}c(b)};_.once("error",m);let x=(f=_.options)==null?void 0:f.body;_.once("retry",(b,T)=>{t=void 0;let R=_.options.body;if(x===R&&l.nodeStream(R)){T.message="Cannot retry with consumed body stream",m(T);return}s=_.options,d(b)}),Se(_,n,Ku),l.undefined(t)&&_.flush()};d(0)});i.on=(a,c)=>(n.on(a,c),i),i.off=(a,c)=>(n.off(a,c),i);let o=a=>{let c=(async()=>{await i;let{options:u}=r.request;return qr(r,a,u.parseJson,u.encoding)})();return Object.defineProperties(c,Object.getOwnPropertyDescriptors(i)),c};return i.json=()=>{if(e.options){let{headers:a}=e.options;!e.writableFinished&&!("accept"in a)&&(a.accept="application/json")}return o("json")},i.buffer=()=>o("buffer"),i.text=()=>o("text"),i}var Qu=async t=>new Promise(e=>{setTimeout(e,t)}),Yu=t=>l.function_(t),Zu=["get","post","put","patch","head","delete"],lo=t=>{t={options:new L(void 0,void 0,t.options),handlers:[...t.handlers],mutableDefaults:t.mutableDefaults},Object.defineProperty(t,"mutableDefaults",{enumerable:!0,configurable:!1,writable:!1});let e=(s,n,i=t.options)=>{let o=new D(s,n,i),a,c=g=>(o.options=g,o._noPipe=!g.isStream,o.flush(),g.isStream?o:(a||(a=Rt(o)),a)),u=0,d=g=>{let m=(t.handlers[u++]??c)(g,d);if(l.promise(m)&&!o.options.isStream&&(a||(a=Rt(o)),m!==a)){let x=Object.getOwnPropertyDescriptors(a);for(let f in x)f in m&&delete x[f];Object.defineProperties(m,x),m.cancel=a.cancel}return m};return d(o.options)};e.extend=(...s)=>{let n=new L(void 0,void 0,t.options),i=[...t.handlers],o;for(let a of s)Yu(a)?(n.merge(a.defaults.options),i.push(...a.defaults.handlers),o=a.defaults.mutableDefaults):(n.merge(a),a.handlers&&i.push(...a.handlers),o=a.mutableDefaults);return lo({options:n,handlers:i,mutableDefaults:Boolean(o)})};let r=async function*(s,n){let i=new L(s,n,t.options);i.resolveBodyOnly=!1;let{pagination:o}=i;p.function_(o.transform),p.function_(o.shouldContinue),p.function_(o.filter),p.function_(o.paginate),p.number(o.countLimit),p.number(o.requestLimit),p.number(o.backoff);let a=[],{countLimit:c}=o,u=0;for(;u<o.requestLimit;){u!==0&&await Qu(o.backoff);let d=await e(void 0,void 0,i),g=await o.transform(d),_=[];p.array(g);for(let x of g)if(o.filter({item:x,currentItems:_,allItems:a})&&(!o.shouldContinue({item:x,currentItems:_,allItems:a})||(yield x,o.stackAllItems&&a.push(x),_.push(x),--c<=0)))return;let m=o.paginate({response:d,currentItems:_,allItems:a});if(m===!1)return;m===d.request.options?i=d.request.options:(i.merge(m),p.any([l.urlInstance,l.undefined],m.url),m.url!==void 0&&(i.prefixUrl="",i.url=m.url)),u++}};e.paginate=r,e.paginate.all=async(s,n)=>{let i=[];for await(let o of r(s,n))i.push(o);return i},e.paginate.each=r,e.stream=(s,n)=>e(s,{...n,isStream:!0});for(let s of Zu)e[s]=(n,i)=>e(n,{...i,method:s}),e.stream[s]=(n,i)=>e(n,{...i,method:s,isStream:!0});return t.mutableDefaults||(Object.freeze(t.handlers),t.options.freeze()),Object.defineProperty(e,"defaults",{value:t,writable:!1,configurable:!1,enumerable:!0}),e},fo=lo;var Xu={options:new L,handlers:[],mutableDefaults:!1},At=fo(Xu);var Go=v(Wo()),Jo=async t=>(await At("https://meta.quiltmc.org/v3/versions/quilt-mappings/"+t).json())[0].version,Ko=async t=>(await At("https://meta.quiltmc.org/v3/versions/loader/"+t).json())[0].loader.version,Qo=async t=>{let e=await At("https://maven.quiltmc.org/repository/release/org/quiltmc/quilted-fabric-api/quilted-fabric-api/maven-metadata.xml").text();return new Go.XMLParser().parse(e).metadata.versioning.versions.version.filter(n=>n.includes("-"+t))[0]};var Yr,Yo,Zo,Xo,ea=!0;typeof process<"u"&&({FORCE_COLOR:Yr,NODE_DISABLE_COLORS:Yo,NO_COLOR:Zo,TERM:Xo}=process.env||{},ea=process.stdout&&process.stdout.isTTY);var of={enabled:!Yo&&Zo==null&&Xo!=="dumb"&&(Yr!=null&&Yr!=="0"||ea)};function S(t,e){let r=new RegExp(`\\x1b\\[${e}m`,"g"),s=`\x1B[${t}m`,n=`\x1B[${e}m`;return function(i){return!of.enabled||i==null?i:s+(~(""+i).indexOf(n)?i.replace(r,n+s):i)+n}}var lm=S(0,0),Zr=S(1,22),fm=S(2,22),dm=S(3,23),pm=S(4,24),mm=S(7,27),gm=S(8,28),ym=S(9,29),bm=S(30,39),ta=S(31,39),ra=S(32,39),_m=S(33,39),wm=S(34,39),Em=S(35,39),xm=S(36,39),Tm=S(37,39),Cm=S(90,39),Rm=S(90,39),Am=S(40,49),Sm=S(41,49),Om=S(42,49),Nm=S(43,49),Pm=S(44,49),Hm=S(45,49),Im=S(46,49),Lm=S(47,49);var St=t=>{console.log(Zr(ra("\u2714"))+" "+t)},sa=t=>{console.log(Zr(ta("\u2718"))+" "+t)};var Nt=require("fs/promises");(async()=>{let t=await(0,Nt.readFile)("./gradle/libs.versions.toml","utf8"),e=(0,Ot.parse)(t),r=e.versions.minecraft;for(let s in e.libraries){let n=e.libraries[s];if(n.module==="org.quiltmc:quilt-mappings"){let i=await Jo(r);typeof n.version=="string"?e.libraries[s].version=i:e.versions[e.libraries[s].version.ref]=i,St(`Updated Quilt Mappings to ${i}`)}else if(n.module==="org.quiltmc:quilt-loader"){let i=await Ko(r);typeof n.version=="string"?e.libraries[s].version=i:e.versions[e.libraries[s].version.ref]=i,St(`Updated Quilt Loader to ${i}`)}else if(n.module==="org.quiltmc.quilted-fabric-api:quilted-fabric-api"){let i=await Qo(r);typeof n.version=="string"?e.libraries[s].version=i:e.versions[e.libraries[s].version.ref]=i,St(`Updated Quilted Fabric API to ${i}`)}}await(0,Nt.writeFile)("./gradle/libs.versions.toml",`${(0,Ot.stringify)(e)}
`)})().catch(t=>{sa(t),process.exit(1)});
