var g=require("@iarna/toml");var c=require("fast-xml-parser"),m=async i=>{let e=await fetch("https://meta.quiltmc.org/v3/versions/quilt-mappings/"+i);return e.ok?(await e.json().then(r=>r[0])).version:null},u=async i=>{let e=await fetch("https://meta.quiltmc.org/v3/versions/loader/"+i);return e.ok?(await e.json().then(r=>r[0])).loader.version:null},v=async i=>{let e=await fetch("https://maven.quiltmc.org/repository/release/org/quiltmc/quilted-fabric-api/quilted-fabric-api/maven-metadata.xml");if(!e.ok)return null;let r=(await e.text().then(t=>new c.XMLParser().parse(t))).metadata.versioning.versions.version.filter(t=>t.includes("-"+i));return r.length?r[0]:null};var n=require("kleur"),a=i=>{console.log((0,n.bold)((0,n.green)("\u2714"))+" "+i)},l=i=>{console.log((0,n.bold)((0,n.red)("\u2718"))+" "+i)};var p=require("fs/promises");(async()=>{let i=await(0,p.readFile)("./gradle/libs.versions.toml","utf8"),e=(0,g.parse)(i),o=e.versions.minecraft;for(let r in e.libraries){let t=e.libraries[r];if(t.module==="org.quiltmc:quilt-mappings"){let s=await m(o);s?(typeof t.version=="string"?e.libraries[r].version=s:e.versions[e.libraries[r].version.ref]=s,a(`Updated Quilt Mappings to ${s}`)):l("Failed to retrieve latest mapping version!")}else if(t.module==="org.quiltmc:quilt-loader"){let s=await u(o);s?(typeof t.version=="string"?e.libraries[r].version=s:e.versions[e.libraries[r].version.ref]=s,a(`Updated Quilt Loader to ${s}`)):l("Failed to retrieve latest loader version!")}else if(t.module==="org.quiltmc.quilted-fabric-api:quilted-fabric-api"){let s=await v(o);s?(typeof t.version=="string"?e.libraries[r].version=s:e.versions[e.libraries[r].version.ref]=s,a(`Updated Quilted Fabric API to ${s}`)):l("Failed to retrieve latest QFAPI version!")}}await(0,p.writeFile)("./gradle/libs.versions.toml",`${(0,g.stringify)(e)}
`)})().catch(i=>{console.error(i),process.exit(1)});
//# sourceMappingURL=index.js.map